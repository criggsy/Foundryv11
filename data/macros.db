{"name":"Psychic Blade - Sneak Attack - Off Hand","type":"script","author":"ZmU4M2IyMzQ1YzI3","img":"modules/plutonium/media/icon/mighty-force.svg","scope":"global","command":"// HotbarUses5e: ActorID=\"YLNA5CQsn8SWeuCL\" ItemID=\"8BGEngj7ICQ9ogLU\"\nconst actorId = \"YLNA5CQsn8SWeuCL\";\nconst itemId = \"8BGEngj7ICQ9ogLU\";\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId);\nconst itemToRoll = actorToRoll?.items.get(itemId);\n\nif (game.modules.get('itemacro')?.active && itemToRoll?.hasMacro() && game.settings.get('itemacro', 'defaultmacro')) {\n\treturn itemToRoll.executeMacro();\n}\n\nif (!itemToRoll) {\n\treturn ui.notifications.warn(game.i18n.format(\"DND5E.ActionWarningNoItem\", { item: itemId, name: actorToRoll?.name ?? \"[Not Found]\" }));\n}\n\nreturn itemToRoll.roll({ vanilla: false });","folder":null,"sort":0,"flags":{"dnd5e":{"itemMacro":true}},"_id":"0OYQsm3BlalatWn3","ownership":{"default":0,"ZmU4M2IyMzQ1YzI3":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"0PwMcT8z59l5PiQm","name":"Set Tourney Vision 1","type":"script","author":"NWRkZDAzNjU5Y2Vm","img":"icons/creatures/eyes/lizard-single-slit-blue.webp","scope":"global","command":"for (const token of canvas.tokens.controlled){\n        await token.document.update({dimSight: 150})\n}","folder":null,"sort":100001,"flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"advanced-macros":{"runAsGM":false}},"ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"name":"Initiative With Disadvantage","type":"script","author":"F7z7HHZOzOuvUuCw","img":"icons/svg/dice-target.svg","scope":"global","command":"// Initiative with Disadvantage by Nulmas#9462\n// Thanks to Freeze#2689, vance#1935 and u/Azzu for the help.\n\n// This macro allows GMs and players to roll for Initiative with disadvantage when playing D&D 5e. Hopefully it won't be needed for long and the option for it will be added \n// to the system in a future release.\n\n// The macro will roll for all the selected tokens and add them to the combat if they aren't in it already. It will also check if you are using Dex as a tiebreaker and roll\n// accordingly.\n\n// BEWARE: If a token has already rolled for initiative and you use this macro with it selected, the new initiative will replace the old one. I considered changing this, but\n// decided it's worth keeping it this way in case a player or GM rolls for initiative without disadvantage by mistake.\n\n(async () => {\n    if (canvas.tokens.controlled.length === 0) return ui.notifications.error(\"Choose tokens to roll for\");\n    await canvas.tokens.toggleCombat();\n    let chosenTokens = canvas.tokens.controlled;\n    let tieBreakerCheck = game.settings.get(\"dnd5e\", \"initiativeDexTiebreaker\") ? 1 : 0; //Checks if Dex tiebreaker is being used\n    let initiatives = chosenTokens.map(t => {\n        let chosenActor = t.actor;\n        let advantage = chosenActor.getFlag(\"dnd5e\", \"initiativeAdv\") ? 1 : 0;\n        let init = chosenActor.data.data.attributes.init.total;\n        let tieBreaker = chosenActor.data.data.abilities.dex.value/100;\n        let roll = new Roll(`${2 - advantage}d20kl + ${init} + ${tieBreaker * tieBreakerCheck}`).roll();\n        roll.toMessage({speaker: ChatMessage.getSpeaker({token: t})});\n        let combatantId = game.combat.combatants.find(c => c.name === t.name)._id;\n        return{\n            _id: combatantId,\n            initiative: roll.total,\n        };\n    });\n    await game.combat.updateCombatant(initiatives);\n})();","folder":null,"sort":0,"flags":{"core":{"sourceId":"Macro.vvUdCHKq60JcksaX"}},"_id":"1AxO2hx7YU9YyIrx","ownership":{"default":0,"y5gmtwxmW3A5ZuOP":3,"F7z7HHZOzOuvUuCw":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"name":"Steady Aim","type":"script","author":"ZmU4M2IyMzQ1YzI3","img":"modules/plutonium/media/icon/spell/phb-hunters-mark.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"YLNA5CQsn8SWeuCL\" ItemID=\"U0ChMwNtrUqI3Veo\"\nconst actorId = \"YLNA5CQsn8SWeuCL\";\nconst itemId = \"U0ChMwNtrUqI3Veo\";\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId);\nconst itemToRoll = actorToRoll?.items.get(itemId);\n\nif (game.modules.get('itemacro')?.active && itemToRoll?.hasMacro() && game.settings.get('itemacro', 'defaultmacro')) {\n\treturn itemToRoll.executeMacro();\n}\n\nif (!itemToRoll) {\n\treturn ui.notifications.warn(game.i18n.format(\"DND5E.ActionWarningNoItem\", { item: itemId, name: actorToRoll?.name ?? \"[Not Found]\" }));\n}\n\nreturn itemToRoll.roll({ vanilla: false });","folder":null,"sort":0,"flags":{"dnd5e":{"itemMacro":true}},"_id":"1ITbGc7tlgeDmSsO","ownership":{"default":0,"ZmU4M2IyMzQ1YzI3":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"1SuKzPZ7OenV1VC0","name":"10-2 Door Trap","type":"chat","author":"NWRkZDAzNjU5Y2Vm","img":"icons/svg/dice-target.svg","scope":"global","command":"The secret door to is protected by a glyph of warding\nthat activates its explosive runes effect whenever an\nelf touches it. All creatures within 20 ft. must make a DC 17\nDexterity saving throw or take 5d8 cold damage. To notice the\nglyph requires a DC 17 Intelligence (Investigation) check.","folder":null,"sort":0,"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}},"ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"name":"Shortbow - Sneak Attack","type":"script","author":"ZmU4M2IyMzQ1YzI3","img":"icons/weapons/bows/shortbow-recurve.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"YLNA5CQsn8SWeuCL\" ItemID=\"c2wqIbF99E6VjHlv\"\nconst actorId = \"YLNA5CQsn8SWeuCL\";\nconst itemId = \"c2wqIbF99E6VjHlv\";\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId);\nconst itemToRoll = actorToRoll?.items.get(itemId);\n\nif (game.modules.get('itemacro')?.active && itemToRoll?.hasMacro() && game.settings.get('itemacro', 'defaultmacro')) {\n\treturn itemToRoll.executeMacro();\n}\n\nif (!itemToRoll) {\n\treturn ui.notifications.warn(game.i18n.format(\"DND5E.ActionWarningNoItem\", { item: itemId, name: actorToRoll?.name ?? \"[Not Found]\" }));\n}\n\nreturn itemToRoll.roll({ vanilla: false });","folder":null,"sort":0,"flags":{"dnd5e":{"itemMacro":true}},"_id":"4gz0ywdzuLpWYNEQ","ownership":{"default":0,"ZmU4M2IyMzQ1YzI3":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"name":"Nekoyle","type":"script","author":"Yjg4NjAyMmMyNzFk","img":"icons/weapons/swords/greatsword-crossguard-silver.webp","scope":"global","command":"const actorId = \"6JZ6aVbh5OAvWU0b\";\nconst itemId = \"Hmeg7vibl82T8UEX\";\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId);\nconst itemToRoll = actorToRoll?.items.get(itemId);\nif (!itemToRoll) {\n\treturn ui.notifications.warn(game.i18n.format(\"DND5E.ActionWarningNoItem\", { item: itemId, name: actorToRoll?.name ?? \"[Not Found]\" }));\n}\n\nreturn itemToRoll.roll({ vanilla: false });","folder":null,"sort":0,"flags":{"dnd5e":{"itemMacro":true}},"_id":"5SjYK8XJb1A948mz","ownership":{"default":0,"Yjg4NjAyMmMyNzFk":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"name":"New Macro","type":"chat","scope":"global","author":"NWRkZDAzNjU5Y2Vm","img":"icons/svg/dice-target.svg","command":"","folder":null,"sort":0,"ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"flags":{},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.285","createdTime":1667326055825,"modifiedTime":1667326055825,"lastModifiedBy":"NWRkZDAzNjU5Y2Vm"},"_id":"61wmU0dW3e33M6Rr"}
{"name":"New Macro","type":"chat","scope":"global","author":"YWIzYTg2YmYzYjVj","img":"icons/svg/dice-target.svg","command":"","folder":null,"sort":0,"ownership":{"default":0,"YWIzYTg2YmYzYjVj":3},"flags":{},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.285","createdTime":1670355777771,"modifiedTime":1670355777771,"lastModifiedBy":"YWIzYTg2YmYzYjVj"},"_id":"6JJPIXbctv7FJd4I"}
{"name":"Superiority Dice","type":"script","author":"Yjg4NjAyMmMyNzFk","img":"icons/dice/d8black.svg","scope":"global","command":"// HotbarUses5e: ActorID=\"6JZ6aVbh5OAvWU0b\" ItemID=\"YTkyZTgzNzE4ZDVi\"\nconst actorId = \"6JZ6aVbh5OAvWU0b\";\nconst itemId = \"YTkyZTgzNzE4ZDVi\";\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId);\nconst itemToRoll = actorToRoll?.items.get(itemId);\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n\treturn itemToRoll.executeMacro();\n}\n\nif (!itemToRoll) {\n\treturn ui.notifications.warn(game.i18n.format(\"DND5E.ActionWarningNoItem\", { item: itemId, name: actorToRoll?.name ?? \"[Not Found]\" }));\n}\n\nreturn itemToRoll.roll({ vanilla: false });","folder":null,"sort":0,"flags":{"dnd5e":{"itemMacro":true}},"_id":"6TO0oQcWw34JFINo","ownership":{"default":0,"Yjg4NjAyMmMyNzFk":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"name":"Heavy Crossbow","type":"script","author":"F7z7HHZOzOuvUuCw","img":"icons/weapons/crossbows/crossbow-blue.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"EN387w0jjCXlduGT\" ItemID=\"rRwaPGMeVsLqKViC\"\nconst actorId = \"EN387w0jjCXlduGT\";\nconst itemId = \"rRwaPGMeVsLqKViC\";\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId);\nconst itemToRoll = actorToRoll?.items.get(itemId);\n\nif (game.modules.get('itemacro')?.active && itemToRoll?.hasMacro() && game.settings.get('itemacro', 'defaultmacro')) {\n\treturn itemToRoll.executeMacro();\n}\n\nif (!itemToRoll) {\n\treturn ui.notifications.warn(game.i18n.format(\"DND5E.ActionWarningNoItem\", { item: itemId, name: actorToRoll?.name ?? \"[Not Found]\" }));\n}\n\nreturn itemToRoll.roll({ vanilla: false });","folder":null,"sort":0,"flags":{"dnd5e":{"itemMacro":true}},"_id":"6VEvTU1I4idGDKCN","ownership":{"default":0,"F7z7HHZOzOuvUuCw":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"6eoebHW3yqWmkBXK","name":"New Macro","type":"script","author":"F7z7HHZOzOuvUuCw","img":"icons/svg/dice-target.svg","scope":"global","command":"let FaustX = canvas.tokens.placeables.find(token => token.name == \"Faustus\");\n\nfor (let nextToken of canvas.tokens.placeables)\n    {\n    if (nextToken.name == \"Faustus - Skelly\")\n        {\n         nextToken.document.update({x: FaustX.data.x, y: FaustX.data.y + 50});\n        }\n    }\n\n\nfor (let nextToken of canvas.tokens.placeables)\n    {\n    if (nextToken.name == \"Faustus - Zomboid\")\n        {\n         nextToken.document.update({x: FaustX.data.x, y: FaustX.data.y + 50});\n        }\n    }","folder":null,"sort":0,"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}},"ownership":{"default":0,"F7z7HHZOzOuvUuCw":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"name":"Link tokens by name","type":"script","scope":"global","author":"NWRkZDAzNjU5Y2Vm","img":"icons/svg/dice-target.svg","command":"let tokens = canvas.tokens.placeables;\n\nfor (let token of tokens) {\n  if (!token.actor && token.name) {\n    let actor = game.actors.find(a => a.name === token.name);\n    if (actor) {\n      // Set the token's actor ID\n      token.document.update({\"actorId\": actor.id});\n    }\n  }\n}\n\nui.notifications.info(\"Tokens linked to actors with matching names.\");","folder":null,"sort":0,"ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"flags":{"combat-utility-belt":{"macroTrigger":""}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.5","coreVersion":"10.291","createdTime":1680207306080,"modifiedTime":1680207497867,"lastModifiedBy":"NWRkZDAzNjU5Y2Vm"},"_id":"7xXGrlaTv8IRhjVq"}
{"_id":"AHPt95szxy6zWwh6","name":"Trigger Mage Armor","type":"chat","author":"F7z7HHZOzOuvUuCw","img":"icons/svg/dice-target.svg","scope":"global","command":"//type the name of the effect in \"EFFECT NAME\"\n\nlet dae_effect = async function() {\n\nconst effect_name = \"Mage Armour\";\n\nconst effect = token.actor.effects.entries;\n\nfor (let i = 0; i < effect.length; i++){\n\nlet condition = effect[i].data.label;\n\nlet status = effect[i].data.disabled;\n\nlet effect_id = effect[i].data._id;\n\nif ((condition === effect_name) && (status === false)) {\n\nawait token.actor.updateEmbeddedEntity(\"ActiveEffect\", {\"_id\": effect_id, \"disabled\" : true});\n\n}\n\nif ((condition === effect_name) && (status === true)){\n\nawait token.actor.updateEmbeddedEntity(\"ActiveEffect\", {\"_id\": effect_id, \"disabled\" : false});\n\n}\n\n}\n\n}\n\ndae_effect();","folder":null,"sort":0,"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}},"ownership":{"default":0,"F7z7HHZOzOuvUuCw":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"name":"Regain Psionic Energy Die","type":"script","author":"ZmU4M2IyMzQ1YzI3","img":"icons/svg/item-bag.svg","scope":"global","command":"// HotbarUses5e: ActorID=\"YLNA5CQsn8SWeuCL\" ItemID=\"MHelkrEwMjuw8ODm\"\nconst actorId = \"YLNA5CQsn8SWeuCL\";\nconst itemId = \"MHelkrEwMjuw8ODm\";\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId);\nconst itemToRoll = actorToRoll?.items.get(itemId);\n\nif (game.modules.get('itemacro')?.active && itemToRoll?.hasMacro() && game.settings.get('itemacro', 'defaultmacro')) {\n\treturn itemToRoll.executeMacro();\n}\n\nif (!itemToRoll) {\n\treturn ui.notifications.warn(game.i18n.format(\"DND5E.ActionWarningNoItem\", { item: itemId, name: actorToRoll?.name ?? \"[Not Found]\" }));\n}\n\nreturn itemToRoll.roll({ vanilla: false });","folder":null,"sort":0,"flags":{"dnd5e":{"itemMacro":true}},"_id":"AMtInMHgdFkMaJCA","ownership":{"default":0,"ZmU4M2IyMzQ1YzI3":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"name":"Soul Blades: Psychic Teleportation","type":"script","author":"ZmU4M2IyMzQ1YzI3","img":"modules/plutonium/media/icon/spell/xge-life-transference.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"YLNA5CQsn8SWeuCL\" ItemID=\"uYxj2cg07bxZfK5J\"\nconst actorId = \"YLNA5CQsn8SWeuCL\";\nconst itemId = \"uYxj2cg07bxZfK5J\";\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId);\nconst itemToRoll = actorToRoll?.items.get(itemId);\n\nif (game.modules.get('itemacro')?.active && itemToRoll?.hasMacro() && game.settings.get('itemacro', 'defaultmacro')) {\n\treturn itemToRoll.executeMacro();\n}\n\nif (!itemToRoll) {\n\treturn ui.notifications.warn(game.i18n.format(\"DND5E.ActionWarningNoItem\", { item: itemId, name: actorToRoll?.name ?? \"[Not Found]\" }));\n}\n\nreturn itemToRoll.roll({ vanilla: false });","folder":null,"sort":0,"flags":{"dnd5e":{"itemMacro":true}},"_id":"ATyCgH8Doq9tx9B5","ownership":{"default":0,"ZmU4M2IyMzQ1YzI3":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"name":"Psionic Power: Psychic Whispers","type":"script","author":"ZmU4M2IyMzQ1YzI3","img":"icons/magic/perception/third-eye-blue-red.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"YLNA5CQsn8SWeuCL\" ItemID=\"XjC7H9y26NqbmeFi\"\nconst actorId = \"YLNA5CQsn8SWeuCL\";\nconst itemId = \"XjC7H9y26NqbmeFi\";\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId);\nconst itemToRoll = actorToRoll?.items.get(itemId);\n\nif (game.modules.get('itemacro')?.active && itemToRoll?.hasMacro() && game.settings.get('itemacro', 'defaultmacro')) {\n\treturn itemToRoll.executeMacro();\n}\n\nif (!itemToRoll) {\n\treturn ui.notifications.warn(game.i18n.format(\"DND5E.ActionWarningNoItem\", { item: itemId, name: actorToRoll?.name ?? \"[Not Found]\" }));\n}\n\nreturn itemToRoll.roll({ vanilla: false });","folder":null,"sort":0,"flags":{"dnd5e":{"itemMacro":true}},"_id":"AfAkyJ7aQ4zx6Hw1","ownership":{"default":0,"ZmU4M2IyMzQ1YzI3":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.2","coreVersion":"10.285","createdTime":null,"modifiedTime":1662920739526,"lastModifiedBy":"F7z7HHZOzOuvUuCw"}}
{"name":"Thieves' Tools","type":"script","author":"ZmU4M2IyMzQ1YzI3","img":"https://5etools-mirror-1.github.io/img/items/PHB/Thieves%27%20Tools.jpg","scope":"global","command":"// HotbarUses5e: ActorID=\"YLNA5CQsn8SWeuCL\" ItemID=\"rlPmVF1ctODGHDQM\"\nconst actorId = \"YLNA5CQsn8SWeuCL\";\nconst itemId = \"rlPmVF1ctODGHDQM\";\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId);\nconst itemToRoll = actorToRoll?.items.get(itemId);\n\nif (game.modules.get('itemacro')?.active && itemToRoll?.hasMacro() && game.settings.get('itemacro', 'defaultmacro')) {\n\treturn itemToRoll.executeMacro();\n}\n\nif (!itemToRoll) {\n\treturn ui.notifications.warn(game.i18n.format(\"DND5E.ActionWarningNoItem\", { item: itemId, name: actorToRoll?.name ?? \"[Not Found]\" }));\n}\n\nreturn itemToRoll.roll({ vanilla: false });","folder":null,"sort":0,"flags":{"dnd5e":{"itemMacro":true}},"_id":"AhovIcuI0UrFsArg","ownership":{"default":0,"ZmU4M2IyMzQ1YzI3":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"name":"Nekoyle","type":"script","author":"Yjg4NjAyMmMyNzFk","img":"icons/weapons/swords/greatsword-crossguard-silver.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"6JZ6aVbh5OAvWU0b\" ItemID=\"Hmeg7vibl82T8UEX\"\nconst actorId = \"6JZ6aVbh5OAvWU0b\";\nconst itemId = \"Hmeg7vibl82T8UEX\";\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId);\nconst itemToRoll = actorToRoll?.items.get(itemId);\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n\treturn itemToRoll.executeMacro();\n}\n\nif (!itemToRoll) {\n\treturn ui.notifications.warn(game.i18n.format(\"DND5E.ActionWarningNoItem\", { item: itemId, name: actorToRoll?.name ?? \"[Not Found]\" }));\n}\n\nreturn itemToRoll.roll({ vanilla: false });","folder":null,"sort":0,"flags":{"dnd5e":{"itemMacro":true}},"_id":"B1crYtSWZ2qvs2L3","ownership":{"default":0,"Yjg4NjAyMmMyNzFk":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"type":"script","scope":"actor","name":"King Penetrator (Green)","img":"icons/weapons/swords/greatsword-crossguard-barbed.webp","command":"dnd5e.documents.macro.rollItem(\"King Penetrator (Green)\")","flags":{"dnd5e":{"itemMacro":true}},"author":"Yjg4NjAyMmMyNzFk","folder":null,"sort":0,"ownership":{"default":0,"Yjg4NjAyMmMyNzFk":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.5","coreVersion":"10.291","createdTime":1684780934138,"modifiedTime":1684780934138,"lastModifiedBy":"Yjg4NjAyMmMyNzFk"},"_id":"BlBQXOugsBe6cbH8"}
{"_id":"DFoBQb3RRDqNHpqi","name":"Shield Bash","type":"script","author":"F7z7HHZOzOuvUuCw","img":"icons/svg/dice-target.svg","scope":"global","command":"let results;\nconst attacker = canvas.tokens.controlled[0];\nconst target = Array.from(game.user.targets);\nif (target.length > 1) {\n    ui.notifications.warn(\"Please select 1 target only\");\n    return;\n}\n\nconst skilltoberolled = target[0].actor.data.data.abilities.str.value < target[0].actor.data.data.abilities.dex.value ? \"dex\" : \"str\";\n\nresults = await game.MonksTokenBar.requestContestedRoll({token:attacker,request:'ability:str'},{token:target[0],request:`ability:${skilltoberolled}`},{mtb_callback:true,silent:true, fastForward:true,flavor: `${target[0].name} tries to resist ${attacker.name}'s shove attempt`});","folder":null,"sort":0,"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":true}},"ownership":{"default":0,"F7z7HHZOzOuvUuCw":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"EPa00oxNE2XHXP1k","name":"Summon","type":"script","author":"F7z7HHZOzOuvUuCw","img":"icons/svg/dice-target.svg","scope":"global","command":"let FaustX = canvas.tokens.placeables.find(token => token.name == \"Faustus\");\n\nfor (let nextToken of canvas.tokens.placeables)\n    {\n    if (nextToken.name == \"Faustus - Skelly\") \n        {\n         nextToken.update({x: FaustX.data.x, y: FaustX.data.y + 50});\n        }\n    }\n\nfor (let nextToken of canvas.tokens.placeables)\n    {\n    if (nextToken.name == \"Faustus - Zomboid\") \n        {\n         nextToken.update({x: FaustX.data.x, y: FaustX.data.y - 50});\n        }\n    }","folder":null,"sort":0,"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}},"ownership":{"default":0,"F7z7HHZOzOuvUuCw":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"name":"Holy Balmrung!","type":"script","author":"zGDVYt3kpPHhnh3u","img":"icons/svg/item-bag.svg","scope":"global","command":"// HotbarUses5e: ActorID=\"pgiLhfM084FTDXir\" ItemID=\"Pf2bYre8VJI79ob7\"\nconst actorId = \"pgiLhfM084FTDXir\";\nconst itemId = \"Pf2bYre8VJI79ob7\";\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId);\nconst itemToRoll = actorToRoll?.items.get(itemId);\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n\treturn itemToRoll.executeMacro();\n}\n\nif (!itemToRoll) {\n\treturn ui.notifications.warn(game.i18n.format(\"DND5E.ActionWarningNoItem\", { item: itemId, name: actorToRoll?.name ?? \"[Not Found]\" }));\n}\n\nreturn itemToRoll.roll({ vanilla: false });","folder":null,"sort":0,"flags":{"dnd5e":{"itemMacro":true}},"_id":"EQY02nHpWG48r30v","ownership":{"default":0,"zGDVYt3kpPHhnh3u":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"EZGHjIhgnO3gd8vz","name":"Get token Id","type":"script","author":"NWRkZDAzNjU5Y2Vm","img":"icons/svg/dice-target.svg","scope":"global","command":"console.log(canvas.tokens.controlled[0].actor.id)","folder":null,"sort":0,"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}},"ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"Eohq7Pq0cXBUEWDh","name":"Normal Crit","type":"chat","author":"Yjg4NjAyMmMyNzFk","img":"icons/svg/dice-target.svg","scope":"global","command":"/r 5d6r<3+5+1","folder":null,"sort":0,"flags":{"combat-utility-belt":{"macroTrigger":""}},"ownership":{"default":0,"Yjg4NjAyMmMyNzFk":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"type":"script","scope":"actor","name":"(Boom Damage)","img":"icons/magic/fire/projectile-fireball-orange-green.webp","command":"dnd5e.documents.macro.rollItem(\"(Boom Damage)\")","flags":{"dnd5e":{"itemMacro":true}},"author":"Yjg4NjAyMmMyNzFk","folder":null,"sort":0,"ownership":{"default":0,"Yjg4NjAyMmMyNzFk":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.2.1","coreVersion":"10.291","createdTime":1686076134237,"modifiedTime":1686076134237,"lastModifiedBy":"Yjg4NjAyMmMyNzFk"},"_id":"HKpKoJEQQfDsyeeW"}
{"name":"Organise Tokens","type":"script","scope":"global","author":"NWRkZDAzNjU5Y2Vm","img":"icons/svg/dice-target.svg","command":"let scene = canvas.scene;\nlet folderName = `Tokens for ${scene.name}`;\n\n// Create the folder if it doesn't exist\nlet folder = game.folders.find(f => f.name === folderName && f.type === \"Actor\");\nif (!folder) {\n  folder = await Folder.create({name: folderName, type: \"Actor\", parent: null});\n}\n\n// Find all tokens with linked actors in the scene\nlet tokens = canvas.tokens.placeables;\nlet actors = tokens.filter(t => t.actor).map(t => t.actor);\n\n// Move the actors to the scene folder\nfor (let actor of actors) {\n  actor.folder = folder.id;\n  await actor.update({\"folder\": folder.id});\n}\n\nui.notifications.info(`Moved ${actors.length} actors to folder \"${folderName}\".`);","folder":null,"sort":0,"ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"flags":{"combat-utility-belt":{"macroTrigger":""}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.5","coreVersion":"10.291","createdTime":1680207618696,"modifiedTime":1680207753081,"lastModifiedBy":"NWRkZDAzNjU5Y2Vm"},"_id":"HoSdRyiC9V7Ub3hE"}
{"name":"Psychic Blade - Sneak Attack","type":"script","author":"ZmU4M2IyMzQ1YzI3","img":"icons/skills/melee/sword-stuck-glowing-pink.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"YLNA5CQsn8SWeuCL\" ItemID=\"e2YFdUUIz8VQlazL\"\nconst actorId = \"YLNA5CQsn8SWeuCL\";\nconst itemId = \"e2YFdUUIz8VQlazL\";\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId);\nconst itemToRoll = actorToRoll?.items.get(itemId);\n\nif (game.modules.get('itemacro')?.active && itemToRoll?.hasMacro() && game.settings.get('itemacro', 'defaultmacro')) {\n\treturn itemToRoll.executeMacro();\n}\n\nif (!itemToRoll) {\n\treturn ui.notifications.warn(game.i18n.format(\"DND5E.ActionWarningNoItem\", { item: itemId, name: actorToRoll?.name ?? \"[Not Found]\" }));\n}\n\nreturn itemToRoll.roll({ vanilla: false });","folder":null,"sort":0,"flags":{"dnd5e":{"itemMacro":true}},"_id":"Ip0pL7B2c19UiiYv","ownership":{"default":0,"ZmU4M2IyMzQ1YzI3":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.2","coreVersion":"10.285","createdTime":null,"modifiedTime":1662920739592,"lastModifiedBy":"F7z7HHZOzOuvUuCw"}}
{"_id":"JAOjHkYBLCtKAuar","name":"Player Notes to Chat","type":"chat","author":"YjQyYTAxMDgxMmQ0","img":"icons/svg/dice-target.svg","scope":"global","command":"/ooc @Actor[Party Chest] @JournalEntry[Player Notes]\n\nMessage #general","folder":null,"sort":0,"flags":{"combat-utility-belt":{"macroTrigger":""}},"ownership":{"default":0,"YjQyYTAxMDgxMmQ0":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"name":"New Macro","type":"script","scope":"global","author":"NWRkZDAzNjU5Y2Vm","img":"icons/svg/dice-target.svg","command":"// Get all tokens in the current scene\nlet tokens = canvas.tokens.placeables;\n\n// Filter out tokens linked to actors\nlet unlinkedTokens = tokens.filter(t => !t.actor);\n\n// Get an array of unique token names\nlet uniqueNames = [...new Set(unlinkedTokens.map(t => t.name))];\n\n// Display the unique names in a chat message\nChatMessage.create({\n  content: `Unlinked Token Names: ${uniqueNames.join(\", \")}`\n});","folder":null,"sort":0,"ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"flags":{"combat-utility-belt":{"macroTrigger":""}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.5","coreVersion":"10.291","createdTime":1680439438845,"modifiedTime":1680439449015,"lastModifiedBy":"NWRkZDAzNjU5Y2Vm"},"_id":"Kvd5O2JUhqHIQYo9"}
{"_id":"M2MzYTQ3OGIwNDI3","name":"L15OC-Magic-Ember-Effect","type":"chat","sort":470000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= Magic Ember Effect }} {{name= Level 15: Obstacle Course }} {{description= After a creature catches a ember (DC 20 Dexterity check) from the brazier in area 31, the following happens: [[1t[OC-Magic-Ember-Effect-Table]]] For more information, see ***[E⁠xploring Level 15](http://journal.roll20.net/handout/-LNvrV6m42T3YFpt8uWk)***. }}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"MDc4YTI3NWY1ZjBl","name":"Astral-Color-Pools","type":"chat","sort":90000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= Color Pools }} {{name= Astral Plane }} {{description= A [[1t[Astral-Color-Pools-Table]]] pool that is [[1d6*10]] feet in diameter can be found in [[1d4*10]] hours. For more information, see ***[A&#8288;stral Plane](http://journal.roll20.net/handout/-LOksd0pFJ6XpcjskVaZ)***. }}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"name":"Psychic Blade Sneak Attack","type":"script","author":"ZmU4M2IyMzQ1YzI3","img":"modules/plutonium/media/icon/mighty-force.svg","scope":"global","command":"// HotbarUses5e: ActorID=\"YLNA5CQsn8SWeuCL\" ItemID=\"e2YFdUUIz8VQlazL\"\nconst actorId = \"YLNA5CQsn8SWeuCL\";\nconst itemId = \"e2YFdUUIz8VQlazL\";\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId);\nconst itemToRoll = actorToRoll?.items.get(itemId);\n\nif (game.modules.get('itemacro')?.active && itemToRoll?.hasMacro() && game.settings.get('itemacro', 'defaultmacro')) {\n\treturn itemToRoll.executeMacro();\n}\n\nif (!itemToRoll) {\n\treturn ui.notifications.warn(game.i18n.format(\"DND5E.ActionWarningNoItem\", { item: itemId, name: actorToRoll?.name ?? \"[Not Found]\" }));\n}\n\nreturn itemToRoll.roll({ vanilla: false });","folder":null,"sort":0,"flags":{"dnd5e":{"itemMacro":true}},"_id":"MG8JYWDZZagzDm9F","ownership":{"default":0,"ZmU4M2IyMzQ1YzI3":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"MGExOGUzZDBlNTQx","name":"Astral-Psychic-Wind","type":"chat","sort":100000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= Psychic Winds }} {{name= Astral Plane }} {{description= While traveling, a psychic wind leaves the party [[1t[Psychic-Wind-Effects-Location-Table]]]. If players fail a DC 15 Intelligence saving throw, they suffer [[1t[Psychic-Wind-Effects-Mental-Table]]]. For more information, see ***[A&#8288;stral Plane](http://journal.roll20.net/handout/-LOksd0pFJ6XpcjskVaZ)***. }}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"MGM4ZDRjNTgzYWYz","name":"L03SL-Azrok-Hold-Random-Encounters","type":"chat","sort":160000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= Azrok's Hold Random Encounter Table }} {{name= Level 3: Sargauth Level }} {{description= If the characters wander the streets, they encounter [[1t[SL-Azrok-Hold-Encounter-Table]]] For more information, see ***[E⁠xploring Level 3](http://journal.roll20.net/handout/-LNvMyFSsSzcWJKrwjiJ)***.}}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"MGU3Y2QwNDkyMWUw","name":"L01DL-Hall-Gate-Effects","type":"chat","sort":130000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= Halls of Hopelessness Gate Effect }} {{name= Level 1: Dungeon Level }} {{description= The following happens when passing through the pillars of the old gate: [[1t[DL-Gate-Effects-Table]]] For more information, see ***[E⁠xploring Level 1](http://journal.roll20.net/handout/-LNvHh9tDg9w56tkwRgA)***. }}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"MGVlZjljNWJhNjQ4","name":"SP-Pawnshop-Item-Chance","type":"chat","sort":120000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= Pawnshop }} {{name= Skullport }} {{description= Thimblewine's Pawnshop [[1t[SP-Pawnshop-Item-Chance]]] For more information, see ***[Exploring the Town](http://journal.roll20.net/handout/-LNLtY29VVnntKRB25so)***. }}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"MTU5ZTVhYjU4MTMw","name":"L09DC-Slaad-Tadpole-Growth","type":"chat","sort":270000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= Slaad Tadpole's Growth }} {{name= Level 9: Dweomercore }} {{description= If left alone, the slaad tadpole in the Lecture Hall (area 20) grows into a **[blue slaad](http://journal.roll20.net/character/-LO8SlW9yeTdrsxUMxiM)** in [[1d12]] hours. For more information, see ***[E⁠⁠xploring Level 9](http://journal.roll20.net/handout/-LNvakRWjpv3qVX3cg5d)***.}}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"MTk4ZTg4N2I2ODUz","name":"Zurkhwood-Yields","type":"chat","sort":50000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= Fungi Yields }} {{name= Zurkhwood }} {{description= A single zurkhwood specimen yields  [[1d4+4]] pounds of food in spores. For more information, see ***[F⁠ungi](http://journal.roll20.net/handout/-LOqi0pfgGR5tLdp6Hly)***. }}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"MWM4ZTUyZmYxYTBj","name":"L14AD-Poisonous-Fungus-Consumption-Chance","type":"chat","sort":430000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= Poisonous Fungus? }} {{name= Level 14: Arcturiadoom }} {{description= While in area 2c, there is a 50 percent chance of an unaware character consuming a poisonous variety and must succeed on a DC 10 Constitution saving throw or be poisoned for [[1d4]] hours. [[1d100]] For more information, see ***[E⁠xploring Level 14](http://journal.roll20.net/handout/-LNvpIkDbas06cT76PHr)***.}}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"MWNjMzhiMjk3NTVi","name":"L08SS-Spirit-Naga-Rejuvenation","type":"chat","sort":250000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= Spirit Naga Rejuvenation }} {{name= Level 8: Slitherswamp }} {{description= The Ssethian Scourges spirit nagas rejuvenate in [[1d6]] days. For more information, see ***[E⁠xploring Level 8](http://journal.roll20.net/handout/-LNvZhnLFYEcUMI-rxS2)***.}}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"MWRiYjIxYWI3MDMx","name":"L09DC-Wormriddle-Location","type":"chat","sort":280000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= Wormriddle's Location }} {{name= Level 9: Dweomercore }} {{description= If she hasn’t already been encountered and defeated elsewhere, there’s a 50 percent chance **[Wormriddle](http://journal.roll20.net/character/-LOSvBOzv6CrOPKs2hMT)** is in area 23b. [[1d100]] Otherwise, she’s in area 23c. For more information, see ***[E⁠⁠⁠xploring Level 9](http://journal.roll20.net/handout/-LNvakRWjpv3qVX3cg5d)***.}}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"MjA0MDQ2OWQxZDg4","name":"L09DC-Violence-Punishment","type":"chat","sort":260000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= Violence's Punishment }} {{name= Level 9: Dweomercore }} {{description= [[1t[DC-Violence-Punishment-Table]]] For more information, see ***[E⁠xploring Level 9](http://journal.roll20.net/handout/-LNvakRWjpv3qVX3cg5d)***.}}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"MjFiNDJmZTZjNDlm","name":"L15OC-Spectral-Bridge-Fireball","type":"chat","sort":460000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= Spectral Bridge Fireball }} {{name= Level 15: Obstacle Course }} {{description= Whenever a creature on the bridge in area 16 crosses the midpoint of the span, there is a 25 percent chance that the lava pool below spouts a fireball that explodes at a point centered on that creature. [[1d100]] The effect is that of a *[fireball](https://roll20.net/compendium/dnd5e/Spells:Fireball?expansion=0#content)* spell (save DC 19) cast using a 7th-level spell slot. It deals [[12d6]] fire damage on a failed saving throw, or half as much damage on a successful one. For more information, see ***[E⁠xploring Level 15](http://journal.roll20.net/handout/-LNvrV6m42T3YFpt8uWk)***. }}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"MmU0Y2VmM2M4YWZj","name":"L09DC-Slamming-Door","type":"chat","sort":300000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= Slamming Door Sound }} {{name= Level 9: Dweomercore }} {{description= The first time the characters reach the midpoint of this hall, they hear a double door slam shut to the [[1t[DC-Slamming-Door-Sound-Table]]] of them. For more information, see ***[E⁠xploring Level 9](http://journal.roll20.net/handout/-LNvakRWjpv3qVX3cg5d)***.}}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"MzUxNGQxZDk3ZTY5","name":"L14AD-Hrossk-Location","type":"chat","sort":440000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= Hrossk's Location }} {{name= Level 14: Arcturiadoom }} {{description= [[1t[AD-Hrossk-Location-Table]]] For more information, see ***[E⁠xploring Level 14](http://journal.roll20.net/handout/-LNvpIkDbas06cT76PHr)***.}}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"N2I1YjBhMzkzMzk3","name":"L20RC-Awakening-The-Mummy-Lord","type":"chat","sort":530000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= Awakening The Mummy Lord }} {{name= Level 20: Runestone Caverns }} {{description= When a spell of first level or higher is cast in area 6a, the mummy lord **[Gorka Tharn](http://journal.roll20.net/character/-LOO4fy4JPYDa0_umwBr)** has a [[?{What level spell was cast?|1}*10]]% chance of awakening the mummy lord there. [[1d100]] Additionally, the duergar **[mummies](http://journal.roll20.net/character/-LNGAP4Q6qNRee4pmrMg)** in area 6b. For more information, see ***[E⁠xploring Level 20](http://journal.roll20.net/handout/-LO4ksHmEybzQ1RjMp5-)***. }}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"N2Q1NTU4ZDYyYjNi","name":"L02AC-Goblin-Vendor-Gold","type":"chat","sort":140000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= Goblin Vendor's Gold }} {{name= Level 2: Arcane Chambers }} {{description= One of the sixteen goblin vendors in the Market Hall carries [[3d6]] gp, [[3d8]] sp, and [[3d10]] cp in a fat pouch. For more information, see ***[E⁠xploring Level 2](http://journal.roll20.net/handout/-LNvJehT9C87UG8U4TBt)***. }}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"name":"Find Token","type":"script","scope":"global","author":"NWRkZDAzNjU5Y2Vm","img":"icons/svg/dice-target.svg","command":"new Dialog({\n  title: \"Find Token by Name\",\n  content: `\n    <div>\n      <label>Token Name:</label>\n      <input type=\"text\" name=\"tokenName\" placeholder=\"Enter token name\" autofocus>\n    </div>\n  `,\n  buttons: {\n    find: {\n      label: \"Find\",\n      callback: async (html) => {\n        // Get the token name input from the user\n        let tokenName = html.find('[name=\"tokenName\"]')[0].value.trim();\n\n        // Find the token with the matching name\n        let token = canvas.tokens.placeables.find(t => t.name === tokenName);\n\n        // Move the camera to the token\n        if (token) {\n          canvas.animatePan({ x: token.center.x, y: token.center.y, duration: 1000 });\n        } else {\n          ui.notifications.warn(`Token with name \"${tokenName}\" not found.`);\n        }\n      }\n    },\n    cancel: {\n      label: \"Cancel\"\n    }\n  }\n}).render(true);","folder":null,"sort":0,"ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"flags":{"combat-utility-belt":{"macroTrigger":""}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.5","coreVersion":"10.291","createdTime":1680207017164,"modifiedTime":1680207025910,"lastModifiedBy":"NWRkZDAzNjU5Y2Vm"},"_id":"N4zsvaBg5atkpX4z"}
{"_id":"NDI3M2ExMzNmOWNk","name":"L10MG-Vlonwelv-Location","type":"chat","sort":330000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= Vlonwelv's Location }} {{name= Level 10: Muiral's Gauntlet }} {{description= **[Vlonwelv Auvryndar](http://journal.roll20.net/character/-LODGIDQUBSCWUyhodwB)** is first encountered in [[1t[MG-Vlonwelv-Location-Table]]] by the characters. For more information, see ***[E⁠xploring Level 10](http://journal.roll20.net/handout/-LNvfFIzFLuJ6bWxYFpt)*** and ***[W⁠hat Dwells on Level 10?](http://journal.roll20.net/handout/-LNveIyjBDRS-uc2dT89)***.}}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"NDIyZTUxMTUxNWY3","name":"Random-Trinket","type":"chat","sort":10000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= Random Trinket }} {{name= Trinkets Table }} {{description= [[1t[Trinkets-Table]]] For more information, see ***[Trinkets Table](http://journal.roll20.net/handout/-LOqE5J5f5j8B80HcHjO)***. }}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"NDQyNjZhOGEwZjg0","name":"L16CL-Ashtyrranthor-Joins-The-Fight","type":"chat","sort":500000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= Ashtyrranthor Joins The Fight }} {{name= Level 16: Crystal Labyrinth & Stardock }} {{description= If a fight breaks out in either area 14 or area 22, Ashtyrranthor arrives in [[1d4+1]] rounds to join the fight. For more information, see ***[E⁠xploring Level 16](http://journal.roll20.net/handout/-LO4P2k83WGFyuVuTrZ1)***. }}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"NDhjZDE0NWJlMTU3","name":"Indefinite-Madness","type":"chat","sort":80000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= Madness }} {{name= Indefinite }} {{description= [[1t[Indefinite-Madness-Table]]] This is a new character flaw that lasts until cured. For more information, see ***[Indefinite Madness](http://journal.roll20.net/handout/-LOq9ukz1GO16iU5xEuN)***. }}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"NTAwZGExYTdiYWQx","name":"Barrelstalk-Yields","type":"chat","sort":20000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= Fungi Yields }} {{name= Barrelstalk }} {{description= A single barrelstalk yields [[1d4+4]] gallons of water and [[1d6+4]] pounds of food. For more information, see ***[F&#8288;ungi](http://journal.roll20.net/handout/-LOqi0pfgGR5tLdp6Hly)***. }}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"NTI2YzA4MTdkYTlk","name":"L03SL-Gondola-Attackers","type":"chat","sort":150000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= Gondola Attackers }} {{name= Level 3: Sargauth Level }} {{description= The following occurs if the gondola in steered down the River Sargauth without the skeletal ferryman and moves through a section marked with a wavy arrow: [[1t[SL-Gondola-Attackers-Table]]] For more information, see ***[E⁠xploring Level 3](http://journal.roll20.net/handout/-LNvMyFSsSzcWJKrwjiJ)***. }}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"NTI5MTRjM2RkNWFi","name":"L23MWL-Halaster-Reforms","type":"chat","sort":590000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= Hallaster Reforms }} {{name= Level 23: Mad Wizard's Lair }} {{description= If Halaster is killed and no one has taken over Undermountain in his absence, Halaster reforms after [[1d10]] days in a random dungeon location and all deactivated gates reactivate. For more information, see ***[C⁠onclusion](http://journal.roll20.net/handout/-LO4oanZ3PkFRjzZsjpX)***. }}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"NTU4MGY1M2Q3YTAw","name":"L07MC-Homunculus-Encounter-Chance","type":"chat","sort":200000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= Homunculus in the Halls }} {{name= Level 7: Maddgoth's Castle }} {{description= There is a 50 percent chance that Maddgoth’s homunculus is stalking the stone hallways (area 18). [[1d100]] The last thing it wants are more invaders in its master’s abode, so it attacks. For more information, see ***[E⁠xploring Level 7](http://journal.roll20.net/handout/-LNvXop2bYat9T8O5gDc)***.}}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"NTllNGVjOTZmMGZh","name":"L07MC-Otto-in-Lab","type":"chat","sort":230000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= Otto in the Lab }} {{name= Level 7: Maddgoth's Castle }} {{description= If the faerie dragon hasn’t been encountered and defeated elsewhere, there is a 25 percent chance that Otto is here when the characters arrive, in which case the door to the room is open. [[1d100]] Otherwise, the door is closed and has a silver coin lodged in its frame (see area 19).  For more information, see ***[E⁠xploring Level 7](http://journal.roll20.net/handout/-LNvXop2bYat9T8O5gDc)***.}}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"NWZkMzgwZDc1ZDNm","name":"L13TG-Simulacrux-Wild-Magic-Surge","type":"chat","sort":390000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= Simulacrux Wild Magic Surge }} {{name= Level 13: Trobriand's Graveyard }} {{description= Due to any spell being cast within 30 feet of the Simulacrux, the following happens: [[1t[TG-Simulacrux-Wild-Magic-Surge-Table]]] For more information, see ***[E⁠xploring Level 13](http://journal.roll20.net/handout/-LNvmbaIOLmGCDfmk7xK)*** and ***[W⁠ild Magic Surge Table](http://journal.roll20.net/handout/-LOl0jFI0T6aAWKv677a)***. }}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"NjViYmVlNmYzNjFl","name":"AddActionsAndRollHp","type":"chat","sort":690000,"flags":{},"scope":"global","command":"!ta\n!token-mod --set bar1|[[ {[[@{selected|npc_hpformula}]],[[@{selected|npc_hpformula}]]}kh1 ]]","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"NjVmNWE1ZTgzNTky","name":"L20RC-Oracle-Answers","type":"chat","sort":550000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= The Oracle's Answer }} {{name= Level 20: Runestone Caverns }} {{description= If any questions is asked in this cave, a whispering voice replies in answer with [[1t[RC-Oracle-Answers-Table]]] For more information, see ***[E⁠xploring Level 20](http://journal.roll20.net/handout/-LO4ksHmEybzQ1RjMp5-)***. }}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"NmJlMzJlNDRmMTc5","name":"L13TG-Dodecahedron-of-Doom-Effect","type":"chat","sort":400000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= Dodecahedron of Doom Effect }} {{name= Level 13: Trobriand's Graveyard }} {{description= After being throw up to 60 feet as an action, the following occurs when the die comes to a rest after rolling for at least 10 feet: [[1t[TG-Dodecahedron-of-Doom-Effect-Table]]] For more information, see ***[E⁠xploring Level 13](http://journal.roll20.net/handout/-LNvmbaIOLmGCDfmk7xK)***. }}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"NmYyYzQ0ZDQzNjVi","name":"L04TC-Tripwire-Trigger","type":"chat","sort":180000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= Tripwire Trigger }} {{name= Level 4: Twisted Caverns }} {{description= There is a 50% chance of breaking a strand in a square marked T in area 9. [[1d100]] If a trap triggers, all creatures occupying the trapped square must succeed on a DC 14 Dexterity saving throw or be struck by a falling rock for [[1d10]] bludgeoning damage. In addition, the sound of the falling rocks alerts the driders in area 10. For more information, see ***[E⁠xploring Level 4](http://journal.roll20.net/handout/-LNvR8ku-PGKU8qOa3KO)***.}}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"NzY2MDM0ZTI4ZjI1","name":"L16CL-Infernexus-Inevitable-Betrayal","type":"chat","sort":490000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= Infernexus' Inevitable Betrayal }} {{name= Level 16: Crystal Labyrinth & Stardock }} {{description= If the characters do not attack Infernexus in area 14 and make a deal with him, he will become their loyal companion for [[1d10]] days before betraying them. For more information, see ***[E⁠xploring Level 16](http://journal.roll20.net/handout/-LO4P2k83WGFyuVuTrZ1)***. }}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"NzgwNmU3NzJiNjhj","name":"L07MC-Otto's-Game","type":"chat","sort":190000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= Otto's Game }} {{name= Level 7: Maddgoth's Castle }} {{description= Any time Otto performs such a prank, the faerie dragon has a 25 percent chance of betraying its location with a giggle or a snicker. [[1d100]] The faerie dragon must then relocate itself on its next turn to keep from being caught. For more information, see ***[E⁠xploring Level 7](http://journal.roll20.net/handout/-LNvXop2bYat9T8O5gDc)***.}}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"Nzk3NTM1MjlkYTk4","name":"L09DC-Professor-Orb-Alignment","type":"chat","sort":310000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= A Professor Orb's Alignment }} {{name= Level 9: Dweomercore }} {{description= The *[p⁠rofessor orb](http://journal.roll20.net/handout/-LOEEVeHRjeh23XvRTB3)* in area is [[1t[DC-Professor-Orb-Alignment-Table]]] alignment. For more information, see ***[E⁠xploring Level 9](http://journal.roll20.net/handout/-LNvakRWjpv3qVX3cg5d)***.}}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"O9kGP9PJqupeSsmz","name":"Longsword +1","type":"script","author":"zGDVYt3kpPHhnh3u","img":"icons/weapons/swords/greatsword-crossguard-steel.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"pgiLhfM084FTDXir\" ItemID=\"tyvwGC4F4U2rOmNp\"\nconst actorId = \"pgiLhfM084FTDXir\";\nconst itemId = \"tyvwGC4F4U2rOmNp\";\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId);\nconst itemToRoll = actorToRoll?.items.get(itemId);\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n\treturn itemToRoll.executeMacro();\n}\n\nif (!itemToRoll) {\n\treturn ui.notifications.warn(game.i18n.format(\"DND5E.ActionWarningNoItem\", { item: itemId, name: actorToRoll?.name ?? \"[Not Found]\" }));\n}\n\nreturn itemToRoll.roll({ vanilla: false });","folder":null,"sort":0,"flags":{"dnd5e":{"itemMacro":true}},"ownership":{"default":0,"zGDVYt3kpPHhnh3u":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"ODJjNzBhMmFkMjhl","name":"Short-Term-Madness","type":"chat","sort":60000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= Madness }} {{name= Short-Term }} {{description= [[1t[Short-Term-Madness-Table]]] This lasts for [[1d10]] minutes. For more information, see ***[Short-Term Madness](http://journal.roll20.net/handout/-LOlO0WSeygJmnHhRErJ)***. }}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"ODJmZjJjZWQwMzA2","name":"L11TW-Trollwarp-Cavern","type":"chat","sort":360000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= Trollwarp Cavern }} {{name= Level 11: Troglodyte Warrens }} {{description= While lingering in area 11b, a magical gate opens and expels [[1d4+2]] trolls and an equal number of chickens. For more information, see ***[E⁠xploring Level 11](http://journal.roll20.net/handout/-LNvgiC_9GABV5WzURXU)***. }}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"ODhjMTdjNDI1MTM5","name":"L20RC-Halaster-Spies-With-The-Runestone","type":"chat","sort":560000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= Halaster Spies With The Runestone }} {{name= Level 20: Runestone Caverns }} {{description=Each time the characters visit this area, there is a 25% chance that Halaster links to the Runestone and uses it to spy on the main cavern. [[1d100]] If he sees the characters and has any reason to want them dead, Halaster casts spells with a suitably long range at them through the Runestone. For more information, see ***[E⁠xploring Level 20](http://journal.roll20.net/handout/-LO4ksHmEybzQ1RjMp5-)***. }}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"name":"Regain Psionic Energy Die","type":"script","author":"ZmU4M2IyMzQ1YzI3","img":"icons/svg/d10-grey.svg","scope":"global","command":"// HotbarUses5e: ActorID=\"YLNA5CQsn8SWeuCL\" ItemID=\"MHelkrEwMjuw8ODm\"\nconst actorId = \"YLNA5CQsn8SWeuCL\";\nconst itemId = \"MHelkrEwMjuw8ODm\";\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId);\nconst itemToRoll = actorToRoll?.items.get(itemId);\n\nif (game.modules.get('itemacro')?.active && itemToRoll?.hasMacro() && game.settings.get('itemacro', 'defaultmacro')) {\n\treturn itemToRoll.executeMacro();\n}\n\nif (!itemToRoll) {\n\treturn ui.notifications.warn(game.i18n.format(\"DND5E.ActionWarningNoItem\", { item: itemId, name: actorToRoll?.name ?? \"[Not Found]\" }));\n}\n\nreturn itemToRoll.roll({ vanilla: false });","folder":null,"sort":0,"flags":{"dnd5e":{"itemMacro":true}},"_id":"ODqQmEtHXu6yV21T","ownership":{"default":0,"ZmU4M2IyMzQ1YzI3":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"OTliOGZmYWEzODhj","name":"Halaster-Goal","type":"chat","sort":0,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= Halaster's Goals }} {{name= Current Goal }} {{description= [[1t[Halaster-Goals-Table]]] For more information, see ***[H&#8288;alaster's Goals](http://journal.roll20.net/handout/-LO4aP-PVKCNJsEuUsD5)***. }}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"name":"Trigger Mage Armor","type":"chat","author":"F7z7HHZOzOuvUuCw","img":"icons/svg/dice-target.svg","scope":"global","command":"//type the name of the effect in \"EFFECT NAME\"\n\nlet dae_effect = async function() {\n\nconst effect_name = \"Mage Armour\";\n\nconst effect = token.actor.effects.entries;\n\nfor (let i = 0; i < effect.length; i++){\n\nlet condition = effect[i].data.label;\n\nlet status = effect[i].data.disabled;\n\nlet effect_id = effect[i].data._id;\n\nif ((condition === effect_name) && (status === false)) {\n\nawait token.actor.updateEmbeddedEntity(\"ActiveEffect\", {\"_id\": effect_id, \"disabled\" : true});\n\n}\n\nif ((condition === effect_name) && (status === true)){\n\nawait token.actor.updateEmbeddedEntity(\"ActiveEffect\", {\"_id\": effect_id, \"disabled\" : false});\n\n}\n\n}\n\n}\n\ndae_effect();","folder":null,"sort":0,"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.AHPt95szxy6zWwh6"}},"_id":"OhPrtaxmyhyWDcYf","ownership":{"default":0,"F7z7HHZOzOuvUuCw":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"P1W0NDWkDvW3kGQv","name":"Measure Token Distances","type":"script","author":"ZmU4M2IyMzQ1YzI3","img":"icons/svg/dice-target.svg","scope":"global","command":"// This macro will measure the distance between the selected tokens\n// and every targetted tokens within a scene.\n// It will then output the measured distances to the chat\n// If called with an argument, determines who to whisper the message to,\n// otherwise sends it as a public message\n\nlet message = \"\"\nfor (let token of canvas.tokens.controlled) {\n   let ruler = canvas.controls.ruler;\n   for (let target of game.user.targets) {\n       ruler.clear()\n       ruler.waypoints.push(token.center)\n       ruler.labels.addChild(new PIXI.Text(\"\"));\n       ruler.measure(target.center);\n       let distance = ruler.labels.children[0].text;\n       message += `From '${token.name}' to '${target.name}' : ${distance}<br/>`\n       ruler.clear();\n   }\n}\nif (message) {\n   const whisper = args[0] ? ChatMessage.getWhisperIDs(args[0]) : undefined;\n   ChatMessage.create({content: message, whisper});\n}","folder":null,"sort":0,"flags":{"combat-utility-belt":{"macroTrigger":""}},"ownership":{"default":0,"ZmU4M2IyMzQ1YzI3":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"P78tMOmHWbPH2kQE","name":"Add HP","type":"script","author":"NWRkZDAzNjU5Y2Vm","img":"icons/svg/regen.svg","scope":"global","command":"// Must use await inside an async function\n(async () => {\n  // The Dialog class handles most user input\n  // Prompt is a special version that is minimal\n  let myValue = await Dialog.prompt({\n    title: 'Add HP',\n    // Dialog will spawn with a single input\n    content: `<input type=\"text\">`,\n    // When closed it will give us the number\n    callback: (html) => parseInt(html.find('input').val())\n  });\n  // Loop X times where X is the value recieved\n  // From the dialog.\n  for (const token of canvas.tokens.controlled){\n    token.actor.data.data.currency.cp = token.actor.data.data.currency.cp+ myValue\n    let myScript = token.actor.data.name + ' has been awarded ' + myValue + ' Hallaster Points!'\n    ChatMessage.create({ content: myScript, speaker: { alias: \"Hallaster Blackcloak\" } });\n}\n// This just closes everything and auto-executes the function.\n})();","folder":null,"sort":0,"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}},"ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"name":"Psychic Blades","type":"script","author":"ZmU4M2IyMzQ1YzI3","img":"modules/plutonium/media/icon/mighty-force.svg","scope":"global","command":"// HotbarUses5e: ActorID=\"YLNA5CQsn8SWeuCL\" ItemID=\"ImT1dFnqAcgmni5Y\"\nconst actorId = \"YLNA5CQsn8SWeuCL\";\nconst itemId = \"ImT1dFnqAcgmni5Y\";\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId);\nconst itemToRoll = actorToRoll?.items.get(itemId);\n\nif (game.modules.get('itemacro')?.active && itemToRoll?.hasMacro() && game.settings.get('itemacro', 'defaultmacro')) {\n\treturn itemToRoll.executeMacro();\n}\n\nif (!itemToRoll) {\n\treturn ui.notifications.warn(game.i18n.format(\"DND5E.ActionWarningNoItem\", { item: itemId, name: actorToRoll?.name ?? \"[Not Found]\" }));\n}\n\nreturn itemToRoll.roll({ vanilla: false });","folder":null,"sort":0,"flags":{"dnd5e":{"itemMacro":true}},"_id":"PKhTPnIvctleC22d","ownership":{"default":0,"ZmU4M2IyMzQ1YzI3":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"name":"Link Unlinked","type":"script","scope":"global","author":"NWRkZDAzNjU5Y2Vm","img":"icons/svg/dice-target.svg","command":"let input = await new Promise(resolve => {\n  new Dialog({\n    title: \"Link Unlinked Tokens to Actors\",\n    content: `\n      <p>Paste the output of the previous macro into this input:</p>\n      <div class=\"form-group\">\n        <textarea id=\"input\" name=\"input\" class=\"form-control\" rows=\"10\"></textarea>\n      </div>\n    `,\n    buttons: {\n      ok: {\n        label: \"OK\",\n        callback: (html) => {\n          let value = html.find(\"#input\").val();\n          resolve(value);\n        }\n      },\n      cancel: {\n        label: \"Cancel\"\n      }\n    },\n    default: \"ok\"\n  }).render(true);\n});\n\nif (!input) return;\n\nlet pairs = input.trim().split(/,\\s*/);\n\nlet tokens = canvas.tokens.placeables.filter(token => !token.actor);\n\nlet linkedCount = 0;\n\nfor (let i = 0; i < pairs.length; i++) {\n  let [name, actorName] = pairs[i].split(\":\");\n  let matchedTokens = tokens.filter(token => token.name.toLowerCase() === name.toLowerCase());\n  for (let j = 0; j < matchedTokens.length; j++) {\n    let token = matchedTokens[j];\n    let actor = game.actors.find(actor => actor.name.toLowerCase() === actorName.toLowerCase());\n    if (actor) {\n      token.document.update({ actorId: actor.id });\n      linkedCount++;\n    }\n  }\n}\n\nif (linkedCount === 0) {\n  ui.notifications.warn(\"No unlinked tokens found with the provided names.\");\n  return;\n}\n\nui.notifications.info(`Linked ${linkedCount} tokens to actors.`);","folder":null,"sort":0,"ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"flags":{"combat-utility-belt":{"macroTrigger":""}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.5","coreVersion":"10.291","createdTime":1680436566621,"modifiedTime":1680436608476,"lastModifiedBy":"NWRkZDAzNjU5Y2Vm"},"_id":"PoLKNLWXW15mCmv1"}
{"name":"Camera > Unlinked","type":"script","scope":"global","author":"NWRkZDAzNjU5Y2Vm","img":"icons/svg/dice-target.svg","command":"let myTokens = canvas.tokens.placeables.filter(myToken => !myToken.actor);\n\nif (myTokens.length === 0) {\n  ui.notifications.warn(\"No unlinked tokens found on the canvas.\");\n  return;\n}\n\nlet myToken = myTokens[0];\n\ncanvas.animatePan({\n  x: myToken.center.x,\n  y: myToken.center.y,\n  duration: 1000\n});","folder":null,"sort":0,"ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"flags":{"combat-utility-belt":{"macroTrigger":""}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.5","coreVersion":"10.291","createdTime":1680440523147,"modifiedTime":1680440559061,"lastModifiedBy":"NWRkZDAzNjU5Y2Vm"},"_id":"PzwAD23H8NBIlFxW"}
{"type":"script","scope":"actor","name":"King Penetrator","img":"icons/weapons/swords/sword-guard-brown.webp","command":"dnd5e.documents.macro.rollItem(\"King Penetrator\")","flags":{"dnd5e":{"itemMacro":true}},"author":"Yjg4NjAyMmMyNzFk","folder":null,"sort":0,"ownership":{"default":0,"Yjg4NjAyMmMyNzFk":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.5","coreVersion":"10.291","createdTime":1684780909443,"modifiedTime":1684780909443,"lastModifiedBy":"Yjg4NjAyMmMyNzFk"},"_id":"Q5IhEf1JNQJNPgJ7"}
{"name":"Lucky","type":"script","author":"Yjg4NjAyMmMyNzFk","img":"icons/sundries/gaming/dice-runed-brown.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"6JZ6aVbh5OAvWU0b\" ItemID=\"SAZfzJZB5r4FgIvB\"\nconst actorId = \"6JZ6aVbh5OAvWU0b\";\nconst itemId = \"SAZfzJZB5r4FgIvB\";\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId);\nconst itemToRoll = actorToRoll?.items.get(itemId);\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n\treturn itemToRoll.executeMacro();\n}\n\nif (!itemToRoll) {\n\treturn ui.notifications.warn(game.i18n.format(\"DND5E.ActionWarningNoItem\", { item: itemId, name: actorToRoll?.name ?? \"[Not Found]\" }));\n}\n\nreturn itemToRoll.roll({ vanilla: false });","folder":null,"sort":0,"flags":{"dnd5e":{"itemMacro":true}},"_id":"RgONC6rh9B181JUh","ownership":{"default":0,"Yjg4NjAyMmMyNzFk":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"STN31QwsI5Ajj2Ef","name":"Piercer Maco","type":"chat","author":"F7z7HHZOzOuvUuCw","img":"icons/svg/dice-target.svg","scope":"global","command":"if (args[0].hitTargets.length < 1) return {};\nconst roll = args[0].damageRoll;\nconst dieSize = roll.terms[0].faces;\nconst lowDice = Math.min(... roll.terms[0].values)\n\nconst isCrit = args[0].isCritical;\n\nif (args[0].tag === \"DamageBonus\" && args[0].item.data.damage.parts[0][1] === \"piercing\") {\n    const choices = [{type:'radio',label:'Yes'},{type:'radio',label:'No'}] \n    const response = await warpgate.dialog(choices, `${token.name}: The lowest d${dieSize} you rolled is ${lowDice}. Do you want to reroll it?`)\n    let chosen = response.find( e => e) ?? 'None selected';\n    \n    if (isCrit && chosen === 'Yes') {\n        //let reRoll = await new Roll(`1d${dieSize}`).roll({async:true})\n       // reRoll.toMessage({flavor:`The rerolled 1d${dieSize} is ${reRoll.total}. The old one was ${lowDice}.`});\n       //return {damageRoll: `1d${dieSize}[piercing]+(${reRoll.total}-${lowDice})[piercing]`, flavor: \"Critical Piercer Feat extra damage and reroll\"}\n        return {damageRoll: `1d${dieSize}[piercing]+(1d${dieSize}-${lowDice})[piercing]`, flavor: `Critical Piercer Feat extra damage and reroll (Oldroll: ${lowDice})`}\n    }\n\n    if(isCrit && (chosen === 'No' || chosen === 'None selected')) return {damageRoll: `1d${dieSize}[piercing]`, flavor: `Critical Piercer Feat extra damage`}\n    \n    if(!isCrit && chosen === 'Yes') {\n        //let reRoll = await new Roll(`1d${dieSize}`).roll({async:true})\n        //reRoll.toMessage({flavor:`The rerolled 1d${dieSize} is ${reRoll.total}. The old one was ${lowDice}.`});\n        //return {damageRoll: `(${reRoll.total}-${lowDice})[piercing]`, flavor: \"Piercer feat reroll\"}\n        return {damageRoll: `(1d${dieSize}-${lowDice})[piercing]`, flavor: `Piercer feat reroll (Oldroll: ${lowDice})`}\n    }\n}","folder":null,"sort":0,"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}},"ownership":{"default":0,"F7z7HHZOzOuvUuCw":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"Sm54fiLWzyrYzl3D","name":"New Macro","type":"chat","author":"YWIzYTg2YmYzYjVj","img":"icons/svg/dice-target.svg","scope":"global","command":"","folder":null,"sort":0,"flags":{"combat-utility-belt":{"macroTrigger":""}},"ownership":{"default":0,"YWIzYTg2YmYzYjVj":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"name":"Soul Blades: Psychic Teleportation","type":"script","author":"ZmU4M2IyMzQ1YzI3","img":"modules/plutonium/media/icon/mighty-force.svg","scope":"global","command":"// HotbarUses5e: ActorID=\"YLNA5CQsn8SWeuCL\" ItemID=\"uYxj2cg07bxZfK5J\"\nconst actorId = \"YLNA5CQsn8SWeuCL\";\nconst itemId = \"uYxj2cg07bxZfK5J\";\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId);\nconst itemToRoll = actorToRoll?.items.get(itemId);\n\nif (game.modules.get('itemacro')?.active && itemToRoll?.hasMacro() && game.settings.get('itemacro', 'defaultmacro')) {\n\treturn itemToRoll.executeMacro();\n}\n\nif (!itemToRoll) {\n\treturn ui.notifications.warn(game.i18n.format(\"DND5E.ActionWarningNoItem\", { item: itemId, name: actorToRoll?.name ?? \"[Not Found]\" }));\n}\n\nreturn itemToRoll.roll({ vanilla: false });","folder":null,"sort":0,"flags":{"dnd5e":{"itemMacro":true}},"_id":"T6fQmUa3HJldclZw","ownership":{"default":0,"ZmU4M2IyMzQ1YzI3":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"TJIUfDaLAIULjtpR","name":"Shield Bash","type":"script","author":"ZmU4M2IyMzQ1YzI3","img":"icons/equipment/shield/heater-wooden-blue.webp","scope":"global","command":"let results;\nconst attacker = canvas.tokens.controlled[0];\nconst target = Array.from(game.user.targets);\nif (target.length > 1) {\n    ui.notifications.warn(\"Please select 1 target only\");\n    return;\n}\n\nconst skilltoberolled = target[0].actor.data.data.abilities.str.value < target[0].actor.data.data.abilities.dex.value ? \"dex\" : \"str\";\n\nresults = await game.MonksTokenBar.requestContestedRoll({token:attacker,request:'ability:str'},{token:target[0],request:`ability:${skilltoberolled}`},{mtb_callback:true,silent:true, fastForward:true,flavor: `${target[0].name} tries to resist ${attacker.name}'s shove attempt`});","folder":null,"sort":0,"flags":{"dnd5e":{"itemMacro":true},"combat-utility-belt":{"macroTrigger":""}},"ownership":{"default":0,"ZmU4M2IyMzQ1YzI3":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"Tcclh41gH8n2NP7q","name":"Show HP","type":"script","author":"NWRkZDAzNjU5Y2Vm","img":"icons/commodities/biological/eye-tentacle-green-orange.webp","scope":"global","command":"ChatMessage.create({ \ncontent: \n\"Current Halaster Points:\" + \"<br/>\" +\n\"-----------\"\n + \"<br/>\" +\n\"Elumon - \" + game.actors.get('pgiLhfM084FTDXir').data.data.currency.cp+ \"<br/>\" +\n\"Faustus - \" + game.actors.get('D0qm7efwho4RTQw6').data.data.currency.cp+ \"<br/>\" +\n\"Gardien - \" + game.actors.get('6JZ6aVbh5OAvWU0b').data.data.currency.cp+ \"<br/>\" +\n\"Alain - \" + game.actors.get('EN387w0jjCXlduGT').data.data.currency.cp+ \"<br/>\" +\n\"Lark - \" + game.actors.get('YLNA5CQsn8SWeuCL').data.data.currency.cp+ \"<br/>\"\n, speaker: { alias: \"Hallaster Blackcloak\" } });","folder":null,"sort":0,"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}},"ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"type":"script","scope":"actor","name":"King Penetrator (Boom)","img":"icons/weapons/swords/greatsword-blue.webp","command":"dnd5e.documents.macro.rollItem(\"King Penetrator (Boom)\")","flags":{"dnd5e":{"itemMacro":true}},"author":"Yjg4NjAyMmMyNzFk","folder":null,"sort":0,"ownership":{"default":0,"Yjg4NjAyMmMyNzFk":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.5","coreVersion":"10.291","createdTime":1684780923302,"modifiedTime":1684780923302,"lastModifiedBy":"Yjg4NjAyMmMyNzFk"},"_id":"UzoWN59QOy76gQ2d"}
{"name":"Toll the Dead","type":"script","author":"YWIzYTg2YmYzYjVj","img":"modules/plutonium/media/icon/spell/xge-toll-the-dead.jpg","scope":"global","command":"const actorId = \"D0qm7efwho4RTQw6\";\nconst itemId = \"Oyjc3Dk371YjMqcx\";\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId);\nconst itemToRoll = actorToRoll?.items.get(itemId);\nif (!itemToRoll) {\n\treturn ui.notifications.warn(game.i18n.format(\"DND5E.ActionWarningNoItem\", { item: itemId, name: actorToRoll?.name ?? \"[Not Found]\" }));\n}\n\nreturn itemToRoll.roll({ vanilla: false });","folder":null,"sort":0,"flags":{"dnd5e":{"itemMacro":true}},"_id":"V6EFQdzQUHnEBq2J","ownership":{"default":0,"YWIzYTg2YmYzYjVj":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"VBzZaKnaCniz4smI","name":"Toggle Torch","type":"script","author":"NWRkZDAzNjU5Y2Vm","img":"icons/svg/fire.svg","scope":"global","command":"for (const token of canvas.tokens.controlled){\n    if (token.data.dimLight!= 0){\n        await token.document.update({dimLight: 0,brightLight:0})\n    } else {\n        await token.document.update({dimLight: 40,brightLight:20})\n    }\n}","folder":null,"sort":0,"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}},"ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"name":"New Macro","type":"chat","author":"YWIzYTg2YmYzYjVj","img":"icons/svg/dice-target.svg","scope":"global","command":"","folder":null,"sort":0,"flags":{},"_id":"VI7vdX7VCxCm0FI7","ownership":{"default":0,"YWIzYTg2YmYzYjVj":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"name":"Sentinel Shield","type":"script","author":"Yjg4NjAyMmMyNzFk","img":"assets/images/Sential%20Shield.jpeg","scope":"global","command":"// HotbarUses5e: ActorID=\"6JZ6aVbh5OAvWU0b\" ItemID=\"V9ZWkBYSuGc44nFl\"\nconst actorId = \"6JZ6aVbh5OAvWU0b\";\nconst itemId = \"V9ZWkBYSuGc44nFl\";\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId);\nconst itemToRoll = actorToRoll?.items.get(itemId);\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n\treturn itemToRoll.executeMacro();\n}\n\nif (!itemToRoll) {\n\treturn ui.notifications.warn(game.i18n.format(\"DND5E.ActionWarningNoItem\", { item: itemId, name: actorToRoll?.name ?? \"[Not Found]\" }));\n}\n\nreturn itemToRoll.roll({ vanilla: false });","folder":null,"sort":0,"flags":{"dnd5e":{"itemMacro":true}},"_id":"VhYUC1reY70ktGRJ","ownership":{"default":0,"Yjg4NjAyMmMyNzFk":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"Vsr4LMo209kg5Nhr","name":"New Macro","type":"script","author":"F7z7HHZOzOuvUuCw","img":"icons/svg/dice-target.svg","scope":"global","command":"let results;\nconst attacker = canvas.tokens.controlled[0];\nconst target = Array.from(game.user.targets);\nif (target.length > 1) {\n    ui.notifications.warn(\"Please select 1 target only\");\n    return;\n}\n\nconst skilltoberolled = target[0].actor.data.data.skills.ath.total < target[0].actor.data.data.skills.acr.total ? \"acr\" : \"ath\";\n\nresults = await game.MonksTokenBar.requestContestedRoll({token:attacker,request:'skill:ath'},{token:target[0],request:`skill:${skilltoberolled}`},{mtb_callback:true,silent:true, fastForward:true,flavor: `${target[0].name} tries to resist ${attacker.name}'s shove attempt`});\n\nif (results.tokenresults[0].roll.total > results.tokenresults[1].roll.total) await game.dfreds.effectInterface.addEffect({ effectName: 'Prone', uuid: target[0].actor.uuid});","folder":null,"sort":0,"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}},"ownership":{"default":0,"F7z7HHZOzOuvUuCw":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"VvbDx4NQp7wDOev8","name":"New Macro","type":"script","author":"F7z7HHZOzOuvUuCw","img":"icons/svg/dice-target.svg","scope":"global","command":"let results;\nconst attacker = canvas.tokens.controlled[0];\nconst target = Array.from(game.user.targets);\nif (target.length > 1) {\n    ui.notifications.warn(\"Please select 1 target only\");\n    return;\n}\n\nconst skilltoberolled = target[0].actor.data.data.skills.ath.total < target[0].actor.data.data.skills.acr.total ? \"acr\" : \"ath\";\n\nresults = await game.MonksTokenBar.requestContestedRoll({token:attacker,request:'skill:ath'},{token:target[0],request:`skill:${skilltoberolled}`},{mtb_callback:true,silent:true, fastForward:true,flavor: `${target[0].name} tries to resist ${attacker.name}'s shove attempt`});\n\nif (results.tokenresults[0].roll.total > results.tokenresults[1].roll.total) await game.dfreds.effectInterface.addEffect({ effectName: 'Prone', uuid: target[0].actor.uuid});","folder":null,"sort":0,"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}},"ownership":{"default":0,"F7z7HHZOzOuvUuCw":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"WjthH7qOHOmVijb1","name":"Indomitable","type":"script","author":"Yjg4NjAyMmMyNzFk","img":"icons/magic/fire/flame-burning-fist-strike.webp","scope":"global","command":"const actorId = \"6JZ6aVbh5OAvWU0b\";\nconst itemId = \"bQDiN6JnzGof489c\";\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId);\nconst itemToRoll = actorToRoll?.items.get(itemId);\nif (!itemToRoll) {\n\treturn ui.notifications.warn(game.i18n.format(\"DND5E.ActionWarningNoItem\", { item: itemId, name: actorToRoll?.name ?? \"[Not Found]\" }));\n}\n\nreturn itemToRoll.roll({ vanilla: false });","folder":null,"sort":0,"flags":{"dnd5e":{"itemMacro":true}},"ownership":{"default":0,"Yjg4NjAyMmMyNzFk":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"X5AZBRQAcm9H67Qn","name":"New Macro","type":"script","author":"F7z7HHZOzOuvUuCw","img":"icons/svg/dice-target.svg","scope":"global","command":"ChatMessage.create({speaker: ChatMessage.getSpeaker({token: token}),content: 'Shove Description'});BetterRolls.rollSkill(actor,'ath');","folder":null,"sort":0,"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}},"ownership":{"default":0,"F7z7HHZOzOuvUuCw":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"XHAW6FL90dHYjfku","name":"Crit GWM","type":"chat","author":"Yjg4NjAyMmMyNzFk","img":"icons/svg/dice-target.svg","scope":"global","command":"/r 5d6r<3+5+1+10","folder":null,"sort":0,"flags":{"combat-utility-belt":{"macroTrigger":""}},"ownership":{"default":0,"Yjg4NjAyMmMyNzFk":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"type":"script","scope":"actor","name":"Heavy Crossbow","img":"icons/weapons/crossbows/crossbow-blue.webp","command":"dnd5e.documents.macro.rollItem(\"Heavy Crossbow\")","flags":{"dnd5e":{"itemMacro":true}},"author":"YjQyYTAxMDgxMmQ0","folder":null,"sort":0,"ownership":{"default":0,"YjQyYTAxMDgxMmQ0":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.285","createdTime":1674411885691,"modifiedTime":1674411885691,"lastModifiedBy":"YjQyYTAxMDgxMmQ0"},"_id":"XUlxDS2TeKOoCdfV"}
{"name":"Psychic Blade - Off Hand","type":"script","author":"ZmU4M2IyMzQ1YzI3","img":"modules/plutonium/media/icon/mighty-force.svg","scope":"global","command":"// HotbarUses5e: ActorID=\"YLNA5CQsn8SWeuCL\" ItemID=\"oSHe4zNxIOEUqp8y\"\nconst actorId = \"YLNA5CQsn8SWeuCL\";\nconst itemId = \"oSHe4zNxIOEUqp8y\";\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId);\nconst itemToRoll = actorToRoll?.items.get(itemId);\n\nif (game.modules.get('itemacro')?.active && itemToRoll?.hasMacro() && game.settings.get('itemacro', 'defaultmacro')) {\n\treturn itemToRoll.executeMacro();\n}\n\nif (!itemToRoll) {\n\treturn ui.notifications.warn(game.i18n.format(\"DND5E.ActionWarningNoItem\", { item: itemId, name: actorToRoll?.name ?? \"[Not Found]\" }));\n}\n\nreturn itemToRoll.roll({ vanilla: false });","folder":null,"sort":0,"flags":{"dnd5e":{"itemMacro":true}},"_id":"XroYoj2bNwzACQWL","ownership":{"default":0,"ZmU4M2IyMzQ1YzI3":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"type":"script","scope":"actor","name":"War Caster","img":"modules/plutonium/media/icon/feat/phb-war-caster.webp","command":"dnd5e.documents.macro.rollItem(\"War Caster\")","flags":{"dnd5e":{"itemMacro":true}},"author":"Yjg4NjAyMmMyNzFk","folder":null,"sort":0,"ownership":{"default":0,"Yjg4NjAyMmMyNzFk":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.5","coreVersion":"10.291","createdTime":1684781244046,"modifiedTime":1684781244046,"lastModifiedBy":"Yjg4NjAyMmMyNzFk"},"_id":"Y0lripQA3Y9WoqYe"}
{"_id":"Y2IwMDZlZGVkMzMy","name":"L21TL-Passing-Deurgar-Patrol","type":"chat","sort":570000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= Passing Duergar Patrol Chance }} {{name= Level 21: Terminus Level }} {{description= If the wandering **[remorhaz](http://journal.roll20.net/character/-LOStzL0sxhwFzBUmYbw)** attacks, there is a 50% chance that a passing patrol of six **[duergar](http://journal.roll20.net/character/-LNG9umC4SpDHT0STpFP)** hears the ruckus and arrives on the scene at the end of the third round of combat. [[1d100]] For more information, see ***[What Dwells On Level 21?](http://journal.roll20.net/handout/-LO4g_NJ6qRqzbev-hu1)*** and ***[E⁠xploring Level 21](http://journal.roll20.net/handout/-LO4hNAt8GqbQiNyzKiJ)***. }}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"Y2IyOGQxODkyNGI3","name":"L08SS-Yoastal-Reforms","type":"chat","sort":240000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= Yoastal Reforms }} {{name= Level 8: Slitherswamp }} {{description= If Yoastal is destroyed while any of the nagas live, she re-forms in area 9 in [[1d4]] days. For more information, see ***[E⁠xploring Level 8](http://journal.roll20.net/handout/-LNvZhnLFYEcUMI-rxS2)***.}}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"Y2M3NzBiOWRiNjRl","name":"L11TW-Stone-Troll","type":"chat","sort":370000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= Stone Troll }} {{name= Level 11: Troglodyte Warrens }} {{description= [[1t[TW-Stone-Troll-Table]]] For more information, see ***[E&#8288;xploring Level 11](http://journal.roll20.net/handout/-LNvgiC_9GABV5WzURXU)***. }}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"YTA0MGQ2YmRjNWY2","name":"L10MG-Muiral-Location","type":"chat","sort":320000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= Muiral's Location }} {{name= Level 10: Muiral's Gauntlet }} {{description= ***[M⁠uiral](http://journal.roll20.net/character/-LOSkiSVIItT7xB1DilY)*** is first encountered in [[1t[MG-Muiral-Location-Table]]] by the characters. For more information, see ***[E⁠xploring Level 10](http://journal.roll20.net/handout/-LNvfFIzFLuJ6bWxYFpt)*** and ***[W⁠hat Dwells on Level 10?](http://journal.roll20.net/handout/-LNveIyjBDRS-uc2dT89)***.}}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"YTIyZjY1NGZmZDdl","name":"L14AD-Polymorph-Traps","type":"chat","sort":420000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= Polymorph Traps }} {{name= Level 14: Arcturiadoom }} {{description= When stepping on a polymorph trap within Arcturiadoom, a humanoid must make a DC 20 Wisdom saving throw or be turned into [[1t[AD-Polymorph-Trap-Table]]], will be hostile to all other creatures, and must attack any other creature it can see. For more information, see ***[E⁠xploring Level 14](http://journal.roll20.net/handout/-LNvpIkDbas06cT76PHr)*** and ***[P⁠olymorph Traps](http://journal.roll20.net/handout/-LNvoL2jsWtxMv-NBPgU)***. }}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"YTVkNjdhOTlhMmQ1","name":"L17SD-River-Branches","type":"chat","sort":510000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= River Branches }} {{name= Level 17: Seadeeps }} {{description= If a creature enters the river in area 20, they are swept to [[1t[SD-River-Branches-Table]]] by its strong current. For more information, see ***[E⁠xploring Level 17](http://journal.roll20.net/handout/-LO4Vuad-SHs1ileSe4E)***. }}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"YTcxYjk2ZWVkMDEz","name":"L12ML-Madness-of-Baphomet","type":"chat","sort":380000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= Madness of Baphomet }} {{name= Level 12: Maze Level }} {{description= Any humanoid that enters the area between the pillars in area 5 or starts its turn there must succeed on a DC 18 Wisdom saving throw or manifest the following character flaw that lasts until the victim is subjected to a *[remove curse](https://roll20.net/compendium/dnd5e/Spells:Remove%20Curse?expansion=0#content)* spell, a *[greater restoration](https://roll20.net/compendium/dnd5e/Spells:Greater%20Restoration?expansion=0#content)* spell, or similar magic. [[1t[ML-Madness-of-Baphomet-Table]]] This flaw supersedes any conflicting flaw. For more information, see ***[E⁠xploring Level 12](http://journal.roll20.net/handout/-LNvjSbFD3QMo8tHCphM)***. }}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"YzJjNzk1M2M5NWE4","name":"L07MC-Spellbooks-in-the-Study","type":"chat","sort":210000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= Random Loot }} {{name= Name of Loot Table }} {{description= One of the twelve spellbooks that can be found in Maddgoth's study (area 25b) contains four *[wizard spells](https://roll20.net/compendium/dnd5e/Spells%20List#content)* up to Level [[1d6]], with four from each. For more information, see ***[E⁠xploring Level 7](http://journal.roll20.net/handout/-LNvXop2bYat9T8O5gDc)***. }}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"YzQwNWJmNjQyZDZm","name":"L15OC-Teleport-Traps","type":"chat","sort":450000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= Teleport Traps }} {{name= Level 15: Obstacle Course }} {{description= This trap teleports you to the teleport trap in [[ ?{What area are you teleporting from?|Area 1,1t[OC-Area-1-Teleport-Table]|Area 5b,1t[OC-Area-5b-Teleport-Table]|Area 6,1t[OC-Area-6-Teleport-Table]|Area 8,1t[OC-Area-8-Teleport-Table]|Area 10,1t[OC-Area-10-Teleport-Table]|Area 11,1t[OC-Area-11-Teleport-Table]|Area 13a,1t[OC-Area-13a-Teleport-Table]|Area 19,1t[OC-Area-19-Teleport-Table]|Area 22b,1t[OC-Area-22b-Teleport-Table]|Area 24a,1t[OC-Area-24a-Teleport-Table]|Area 26,1t[OC-Area-26-Teleport-Table]|Area 28,1t[OC-Area-28-Teleport-Table]|Area 31,1t[OC-Area-31-Teleport-Table]|Area 35,1t[OC-Area-35-Teleport-Table]|Area 36a,1t[OC-Area-36a-Teleport-Table]} ]] For more information, see ***[E⁠xploring Level 15](http://journal.roll20.net/handout/-LNvrV6m42T3YFpt8uWk)***. }}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"ZGM5ZWFkYjQ2OGIz","name":"L13TG-Rust-Monster-Provoked","type":"chat","sort":410000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= Simulacrux Wild Magic Surge }} {{name= Level 13: Trobriand's Graveyard }} {{description= If a character wearing metal armor or carrying a metal shield walks within 5 feet of a rust monster, there’s a 30 percent chance that the creature attacks the character with the intention of devouring the armor or shield. [[1d100]] For more information, see ***[E⁠xploring Level 13](http://journal.roll20.net/handout/-LNvmbaIOLmGCDfmk7xK)***. }}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"ZGNjNDcyMTJjNGM1","name":"L11TW-Wounded-Troglodyte-Hit-Points","type":"chat","sort":350000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= Wounded Troglodyte Hit Points }} {{name= Level 11: Troglodyte Warrens }} {{description= The wounded troglodytes in area 7c have the following hit points remaining: [[1d6]], [[1d6]], [[1d6]], and [[1d6]]. For more information, see ***[E⁠xploring Level 11](http://journal.roll20.net/handout/-LNvgiC_9GABV5WzURXU)***. }}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"ZGQ1YTBkNmE5ZTMz","name":"L03SL-Kinrob-Stock-Chance","type":"chat","sort":170000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= Kinrob's Stock }} {{name= Level 3: Sargauth Level }} {{description= There’s a 25 percent chance that Kinrob has the Adventuring Gear item in question and will trade it for one or more items of equal or greater value. [[1d100]] For more information, see ***[E⁠⁠xploring Level 3](http://journal.roll20.net/handout/-LNvMyFSsSzcWJKrwjiJ)*** and ***[Adventuring Gear](https://roll20.net/compendium/dnd5e/Rules:Adventuring%20Gear?expansion=0#content)***.}}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"name":"Rapier of Warning - Sneak Attack","type":"script","author":"ZmU4M2IyMzQ1YzI3","img":"icons/weapons/swords/sword-guard-brown.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"YLNA5CQsn8SWeuCL\" ItemID=\"Bh5S5jwv6RwR2Vp5\"\nconst actorId = \"YLNA5CQsn8SWeuCL\";\nconst itemId = \"Bh5S5jwv6RwR2Vp5\";\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId);\nconst itemToRoll = actorToRoll?.items.get(itemId);\n\nif (game.modules.get('itemacro')?.active && itemToRoll?.hasMacro() && game.settings.get('itemacro', 'defaultmacro')) {\n\treturn itemToRoll.executeMacro();\n}\n\nif (!itemToRoll) {\n\treturn ui.notifications.warn(game.i18n.format(\"DND5E.ActionWarningNoItem\", { item: itemId, name: actorToRoll?.name ?? \"[Not Found]\" }));\n}\n\nreturn itemToRoll.roll({ vanilla: false });","folder":null,"sort":0,"flags":{"dnd5e":{"itemMacro":true}},"_id":"ZKFq5Ipm8HVy5B3b","ownership":{"default":0,"ZmU4M2IyMzQ1YzI3":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"ZTAxNTNhZGJmY2U1","name":"L09DC-Statue-Sound-Effects","type":"chat","sort":290000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= Halaster Statues Sound Effects }} {{name= Level 9: Dweomercore }} {{description= When a creature passes between the statues in area 24, the following happens: [[1t[DC-Statue-Sound-Effects-Table]]] For more information, see ***[E⁠⁠xploring Level 9](http://journal.roll20.net/handout/-LNvakRWjpv3qVX3cg5d)***.}}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"ZTBjZWZiZDE3YmYw","name":"Trillimac-Yields","type":"chat","sort":40000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= Fungi Yields }} {{name= Trillimac }} {{description= A single trillimac stalk yields  [[1d6+4]] pounds of food. For more information, see ***[F⁠ungi](http://journal.roll20.net/handout/-LOqi0pfgGR5tLdp6Hly)***. }}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"ZTRhNTBkNGJlYTYy","name":"L22SH-Will-o-wisp-Spawns","type":"chat","sort":580000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= Will-o'-wisp Spawns }} {{name= Level 22: Shadowdusk Hold }} {{description= Any humanoid that dies in Shadowdusk Hold rises from its corpse [[1d4]] hours later as a **[will-o’-wisp](http://journal.roll20.net/character/-LNL8hv5iyytwEWFrSbo)** under the DM’s control. Casting *[dispel evil and good](https://roll20.net/compendium/dnd5e/Spells:Dispel%20Evil%20and%20Good?expansion=0#content)* on the corpse before the will-o’-wisp forms prevents such an occurrence, as does bringing the body out of Shadowdusk Hold or into the area of a *[hallow](https://roll20.net/compendium/dnd5e/Spells:Hallow?expansion=0#content)* spell. For more information, see ***[E⁠xploring Level 22](http://journal.roll20.net/handout/-LO4msVN2ZxAZPEh0vjn)***. }}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"ZTdkNTY5NTA4ZTk0","name":"L19CoO-Beholder-Memory","type":"chat","sort":520000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= Beholder Memories }} {{name= Level 19: Caverns of Ooze }} {{description= After inhaling spores, you receive the following memory: [[1t[CoO-Beholder-Memories]]] For more information, see ***[Exploring the Caverns of Ooze](http://journal.roll20.net/handout/-LNLme7nLw9f2L7iyH_v)***. }}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"ZWEwOTI2ODBjMWM3","name":"Actions","type":"chat","sort":680000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction}{{rname=@{selected|character_name}}}{{name=@{selected|npc_type}\n**HP: **@{selected|bar1} / @{selected|hp|max} | ** AC: ** @{selected|npc_ac} | **Spd: ** @{selected|npc_speed}\n**Languages: **@{selected|npc_languages}\n **Senses: **@{selected|npc_senses}\n **Resists:: **@{selected|npc_resistances}\n **Immune: **@{selected|npc_immunities}\n **Cond. Immune: **@{selected|npc_condition_immunities}}}{{description=**Abilities**\n[**Str @{selected|strength}** *(@{selected|strength_mod})*](~selected|npc_str) | [save](~selected|npc_str_save)\n[**Dex @{selected|dexterity}** *(@{selected|dexterity_mod})*](~selected|npc_dec) | [save](~selected|npc_dex_save)\n[**Con @{selected|constitution}** *(@{selected|constitution_mod})*](~selected|npc_con) | [save](~selected|npc_con_save)\n[**Int @{selected|intelligence}** *(@{selected|intelligence_mod})*](~selected|npc_int) | [save](~selected|npc_int_save)\n[**Wis @{selected|wisdom}** *(@{selected|wisdom_mod})*](~selected|npc_wis) | [save](~selected|npc_wis_save)\n[**Cha @{selected|charisma}** *(@{selected|charisma_mod})*](~selected|npc_cha) | [save](~selected|npc_cha_save)\n**Skills**\n[Acrobatics](~selected|npc_Acrobatics) | [Animal Handling](~selected|npc_Animal_Handling) | [Arcana](~selected|npc_Arcana) | [Athletics](~selected|npc_Athletics|Deception](~selected|npc_Deception) | [History](~selected|npc_History) | [Insight](~selected|npc_Insight) | [Intimidation](~selected|npc_Intimidation) | [Investigation](~selected|npc_Investigation) | [Medicine](~selected|npc_Medicine) | [Nature](~selected|npc_Nature) | [Perception](~selected|npc_Perception) | [Performance](~selected|npc_Performance) | [Persuasion](~selected|npc_Persuasion) | [Religion](~selected|npc_Religion) | [Sleight of Hand](~selected|npc_Sleight_of_Hand) | [Stealth](~selected|npc_stealth) | [Survival](~selected|npc_survival)\n**Actions**\n[@{selected|repeating_npcaction_$0_name}](~selected|repeating_npcaction_$0_npc_action)\n[@{selected|repeating_npcaction_$1_name}](~selected|repeating_npcaction_$1_npc_action)\n[@{selected|repeating_npcaction_$2_name}](~selected|repeating_npcaction_$2_npc_action)\n[@{selected|repeating_npcaction_$3_name}](~selected|repeating_npcaction_$3_npc_action)\n[@{selected|repeating_npcaction_$4_name}](~selected|repeating_npcaction_$4_npc_action)\n}} &{noerror}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"ZWIwNmIzYThmNTQw","name":"L10MG-Wounded-Drow-HP","type":"chat","sort":340000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= Wounded Drow Hit Points }} {{name= Level 10: Muiral's Gauntlet }} {{description= The wounded drow in the hospital (area 28a) have the following hit points remaining: [[1d12]], [[1d12]], [[1d12]], [[1d12]], [[1d12]], and [[1d12]]. For more information, see ***[E⁠xploring Level 10](http://journal.roll20.net/handout/-LNvfFIzFLuJ6bWxYFpt)***. }}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"ZWMxZjRmZmJkYzMz","name":"L16CL-Ashtyrranthor's-Attention","type":"chat","sort":480000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= Ashtyrranthor's Attention }} {{name= Level 16: Crystal Labyrinth & Stardock }} {{description=If combat breaks out inside Crèche K’liir, there is a 10 percent chance that she hears the disturbance. [[1d100]] She investigates immediately, joining the battle in progress and using her *[gaseous form](https://roll20.net/compendium/dnd5e/Spells:Gaseous%20Form?expansion=0#content)*, *[misty step](https://roll20.net/compendium/dnd5e/Spells:Misty%20Step?expansion=0#content)*, and *[passwall](https://roll20.net/compendium/dnd5e/Spells:Passwall?expansion=0#content)* spells to enter hard-to-reach locations. For more information, see ***[E⁠xploring Level 16](http://journal.roll20.net/handout/-LO4P2k83WGFyuVuTrZ1)***. }}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"name":"M: Riposte","type":"script","author":"Yjg4NjAyMmMyNzFk","img":"worlds/dotmm/characters/346_-_Gardien_de_Cl_C3_B4ture/token.png","scope":"global","command":"const actorId = \"6JZ6aVbh5OAvWU0b\";\nconst itemId = \"YzZhYTdmOTMyYmNj\";\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId);\nconst itemToRoll = actorToRoll?.items.get(itemId);\nif (!itemToRoll) {\n\treturn ui.notifications.warn(game.i18n.format(\"DND5E.ActionWarningNoItem\", { item: itemId, name: actorToRoll?.name ?? \"[Not Found]\" }));\n}\n\nreturn itemToRoll.roll({ vanilla: false });","folder":null,"sort":0,"flags":{"dnd5e":{"itemMacro":true}},"_id":"Zd0gBjJT3B4Gbk8W","ownership":{"default":0,"Yjg4NjAyMmMyNzFk":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"ZjAzZTFiZDc5NGI5","name":"Ripplebark-Yields","type":"chat","sort":30000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= Fungi Yields }} {{name= Ripplebark }} {{description= A single sheet of ripplebark yields  [[1d4+6]] pounds of food. For more information, see ***[F⁠ungi](http://journal.roll20.net/handout/-LOqi0pfgGR5tLdp6Hly)***. }}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"ZjMxYTJhMmY0NzU0","name":"L20RC-Object-Transformation-Statue","type":"chat","sort":540000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= Object Transformation Statue }} {{name= Level 20: Runestone Caverns }} {{description= Whenever a nonmagical object weighing 10 pounds or less is placed in the statue in area 11b’s cupped hands, it turns into [[1t[RC-Object-Transformation-Statue-Table]]]. Additionally, each time an object is removed from the statue’s cupped hands, there is a 20% chance that the white toadstools growing out of the statue’s broken head release a cloud of milky-white spores. [[1d100]] The cloud fills a 20-foot-radius sphere centered on the statue and lasts for 1 minute. Any creature that starts its turn in the cloud must succeed on a DC 15 Constitution saving throw or contract a disease called blinding sickness. For more information, see ***[E⁠xploring Level 20](http://journal.roll20.net/handout/-LO4ksHmEybzQ1RjMp5-)***. }}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"ZjUyOTRiNmU1M2My","name":"L07MC-Shelf-Collapse","type":"chat","sort":220000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= Otto's Secret Stash }} {{name= Level 7: Maddgoth's Castle }} {{description= Any character who tries to get at a hard-to-reach item from Otto's stash has a 50 percent chance of setting into motion a Rube Goldberg-esque cascade of tables and baubles. [[1d100]] When everything comes tumbling down, every creature in the room must make a DC 15 Dexterity saving throw, taking [[3d6]] bludgeoning damage on a failed save, or half as much damage on a successful one. For more information, see ***[E⁠xploring Level 7](http://journal.roll20.net/handout/-LNvXop2bYat9T8O5gDc)***.}}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"ZmNmZDEwNmMyYTBk","name":"Long-Term-Madness","type":"chat","sort":70000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= Madness }} {{name= Long-Term }} {{description= [[1t[Long-Term-Madness-Table]]] This lasts for [[1d10*10]] hours. For more information, see ***[Long-Term Madness](http://journal.roll20.net/handout/-LOlO4Wzrfdo2gts7Los)***. }}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"ZmU4ZDZkMDI2YjJk","name":"SP-Bounty-Open","type":"chat","sort":110000,"flags":{},"scope":"global","command":"/w gm &{template:npcaction} {{rname= Is Sargauth's Bounty Open? }} {{name= Skullport }} {{description= Sargauth's Bounty currently [[1t[SP-SB-Open]]] For more information, see ***[Exploring the Town](http://journal.roll20.net/handout/-LNLtY29VVnntKRB25so)***. }}","author":"NWRkZDAzNjU5Y2Vm","img":"worlds/dungeon-of-the-mad-mage/macros/roll20_macro.png","ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"folder":null,"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"aDC9yjP6kkFuW8lW","name":"Action Surge","type":"script","author":"Yjg4NjAyMmMyNzFk","img":"icons/skills/social/intimidation-impressing.webp","scope":"global","command":"const actorId = \"6JZ6aVbh5OAvWU0b\";\nconst itemId = \"teNja5X8ZLDB4qPj\";\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId);\nconst itemToRoll = actorToRoll?.items.get(itemId);\nif (!itemToRoll) {\n\treturn ui.notifications.warn(game.i18n.format(\"DND5E.ActionWarningNoItem\", { item: itemId, name: actorToRoll?.name ?? \"[Not Found]\" }));\n}\n\nreturn itemToRoll.roll({ vanilla: false });","folder":null,"sort":0,"flags":{"dnd5e":{"itemMacro":true}},"ownership":{"default":0,"Yjg4NjAyMmMyNzFk":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"axEUFHOMZqI65JHr","name":"Longbow","type":"script","author":"ZmU4M2IyMzQ1YzI3","img":"icons/weapons/bows/longbow-leather-green.webp","scope":"global","command":"const actorId = \"xSu5Z3aB4ie8gwPQ\";\nconst itemId = \"oCgX1s2y6cRv2XnS\";\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId);\nconst itemToRoll = actorToRoll?.items.get(itemId);\nif (!itemToRoll) {\n\treturn ui.notifications.warn(game.i18n.format(\"DND5E.ActionWarningNoItem\", { item: itemId, name: actorToRoll?.name ?? \"[Not Found]\" }));\n}\n\nreturn itemToRoll.roll({ vanilla: false });","folder":null,"sort":0,"flags":{"dnd5e":{"itemMacro":true}},"ownership":{"default":0,"ZmU4M2IyMzQ1YzI3":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"name":"Show Unlinked Token","type":"script","scope":"global","author":"NWRkZDAzNjU5Y2Vm","img":"icons/svg/dice-target.svg","command":"// Get all tokens in the current scene\nlet tokens = canvas.tokens.placeables;\n\n// Filter out tokens linked to actors\nlet unlinkedTokens = tokens.filter(t => !t.actor);\n\n// Get an array of unique token names\nlet uniqueNames = [...new Set(unlinkedTokens.map(t => t.name))];\n\n// Display the unique names in a chat message\nChatMessage.create({\n  content: `Unlinked Token Names: ${uniqueNames.join(\", \")}`\n});","folder":null,"sort":0,"ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"flags":{"combat-utility-belt":{"macroTrigger":""}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.5","coreVersion":"10.291","createdTime":1680206916568,"modifiedTime":1680206927650,"lastModifiedBy":"NWRkZDAzNjU5Y2Vm"},"_id":"b1KePplUIuamYQ7l"}
{"name":"Token Vision Configuration","type":"script","author":"NWRkZDAzNjU5Y2Vm","img":"icons/svg/dice-target.svg","scope":"global","command":"// A macro for the Foundry virtual tabletop that lets a user configure their token's vision and lighting settings. This script is taken from Sky's foundry repo here: https://github.com/Sky-Captain-13/foundry/blob/master/scriptMacros/tokenVision.js.\n\nlet applyChanges = false;\nnew Dialog({\n  title: `Token Vision Configuration`,\n  content: `\n    <form>\n      <div class=\"form-group\">\n        <label>Vision Type:</label>\n        <select id=\"vision-type\" name=\"vision-type\">\n          <option value=\"nochange\">No Change</option>\n          <option value=\"dim0\">Self</option>\n          <option value=\"dim30\">Darkvision (30 ft)</option>\n          <option value=\"dim60\">Darkvision (60 ft)</option>\n          <option value=\"dim90\">Darkvision (90 ft)</option>\n          <option value=\"dim120\">Darkvision (120 ft)</option>\n          <option value=\"dim150\">Darkvision (150 ft)</option>\n          <option value=\"dim180\">Darkvision (180 ft)</option>\n          <option value=\"bright120\">Devil's Sight (Warlock)</option>\n        </select>\n      </div>\n      <div class=\"form-group\">\n        <label>Light Source:</label>\n        <select id=\"light-source\" name=\"light-source\">\n          <option value=\"nochange\">No Change</option>\n          <option value=\"none\">None</option>\n          <option value=\"candle\">Candle</option>\n          <option value=\"lamp\">Lamp</option>\n          <option value=\"bullseye\">Lantern (Bullseye)</option>\n          <option value=\"hooded-dim\">Lantern (Hooded - Dim)</option>\n          <option value=\"hooded-bright\">Lantern (Hooded - Bright)</option>\n          <option value=\"light\">Light (Cantrip)</option>\n          <option value=\"torch\">Torch</option>\n          <option value=\"moon-touched\">Moon-Touched</option>\n        </select>\n      </div>\n    </form>\n    `,\n  buttons: {\n    yes: {\n      icon: \"<i class='fas fa-check'></i>\",\n      label: `Apply Changes`,\n      callback: () => applyChanges = true\n    },\n    no: {\n      icon: \"<i class='fas fa-times'></i>\",\n      label: `Cancel Changes`\n    },\n  },\n  default: \"yes\",\n  close: html => {\n    if (applyChanges) {\n      for ( let token of canvas.tokens.controlled ) {\n        let visionType = html.find('[name=\"vision-type\"]')[0].value || \"none\";\n        let lightSource = html.find('[name=\"light-source\"]')[0].value || \"none\";\n        let dimSight = 0;\n        let brightSight = 0;\n        let dimLight = 0;\n        let brightLight = 0;\n        let lightAngle = 360;\n        let lockRotation = token.data.lockRotation;\n        let lightAnimation = token.data.lightAnimation;\n        let lightAlpha = token.data.lightAlpha;\n        let lightColor = token.data.lightColor;\n        const colorFire = \"#f8c377\";\n        const colorWhite = \"#ffffff\";\n        const colorMoonGlow = \"#f4f1c9\";\n        // Get Vision Type Values\n        switch (visionType) {\n          case \"dim0\":\n            dimSight = 0;\n            brightSight = 0;\n            break;\n          case \"dim30\":\n            dimSight = 30;\n            brightSight = 0;\n            break;\n          case \"dim60\":\n            dimSight = 60;\n            brightSight = 0;\n            break;\n          case \"dim90\":\n            dimSight = 90;\n            brightSight = 0;\n            break;\n          case \"dim120\":\n            dimSight = 120;\n            brightSight = 0;\n            break;\n          case \"dim150\":\n            dimSight = 150;\n            brightSight = 0;\n            break;\n          case \"dim180\":\n            dimSight = 180;\n            brightSight = 0;\n            break;\n          case \"bright120\":\n            dimSight = 0;\n            brightSight= 120;\n            break;\n          case \"nochange\":\n          default:\n            dimSight = token.data.dimSight;\n            brightSight = token.data.brightSight;\n        }\n        // Get Light Source Values\n        switch (lightSource) {\n          case \"none\":\n            dimLight = 0;\n            brightLight = 0;\n            lightAnimation = {type: \"none\"};\n            break;\n          case \"candle\":\n            dimLight = 10;\n            brightLight = 5;\n            lightAnimation = {type: \"torch\", speed: 2, intensity: 2};\n            lightColor = colorFire;\n            lightAlpha = 0.15;\n            break;\n          case \"lamp\":\n            dimLight = 45;\n            brightLight = 15;\n            lightAnimation = {type: \"torch\", speed: 2, intensity: 2};\n            lightColor = colorFire;\n            lightAlpha = 0.15;\n            break;\n          case \"bullseye\":\n            dimLight = 120;\n            brightLight = 60;\n            lockRotation = false;\n            lightAngle = 52.5;\n            lightAnimation = {type: \"torch\", speed: 2, intensity: 2};\n            lightColor = colorFire;\n            lightAlpha = 0.15;\n            break;\n          case \"hooded-dim\":\n            dimLight = 5;\n            brightLight = 0;\n            lightAnimation = {type: \"torch\", speed: 2, intensity: 2};\n            lightColor = colorFire;\n            lightAlpha = 0.15;\n            break;\n          case \"hooded-bright\":\n            dimLight = 60;\n            brightLight = 30;\n            lightAnimation = {type: \"torch\", speed: 2, intensity: 2};\n            lightColor = colorFire;\n            lightAlpha = 0.15;\n            break;\n          case \"light\":\n            dimLight = 40;\n            brightLight = 20;\n            lightAnimation = {type: \"none\"};\n            lightColor = colorWhite;\n            lightAlpha = 0.15;\n            break;\n          case \"torch\":\n            dimLight = 40;\n            brightLight = 20;\n            lightAnimation = {type: \"torch\", speed: 2, intensity: 2};\n            lightColor = colorFire;\n            lightAlpha = 0.15;\n            break;\n          case \"moon-touched\":\n            dimLight = 30;\n            brightLight = 15;\n            lightAnimation = {type: \"none\"};\n            lightColor = colorMoonGlow;\n            break;\n          case \"nochange\":\n          default:\n            dimLight = token.data.dimLight;\n            brightLight = token.data.brightLight;\n            lightAngle = token.data.lightAngle;\n            lockRotation = token.data.lockRotation;\n            lightAnimation = token.data.lightAnimation;\n            lightAlpha = token.data.lightAlpha;\n            lightColor = token.data.lightColor;\n        }\n        // Update Token\n        console.log(token);\n        token.update({\n          vision: true,\n          dimSight: dimSight,\n          brightSight: brightSight,\n          dimLight: dimLight,\n          brightLight:  brightLight,\n          lightAngle: lightAngle,\n          lockRotation: lockRotation,\n          lightAnimation: lightAnimation,\n          lightAlpha: lightAlpha,\n          lightColor: lightColor\n        });\n      }\n    }\n  }\n}).render(true);","folder":null,"sort":0,"flags":{"core":{"sourceId":"Compendium.foundry_community_macros.community-macros-token.jBcKwGUwHS2V6nat"}},"_id":"cbVB15428xeqb1uA","ownership":{"default":0,"y5gmtwxmW3A5ZuOP":3,"NWRkZDAzNjU5Y2Vm":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"ctQ6Bg6aTCRqlVP0","name":"Journal Entries","type":"chat","author":"ZmU4M2IyMzQ1YzI3","img":"icons/commodities/materials/parchment-secrets.webp","scope":"global","command":"/ooc @JournalEntry[Floor4] @Actor[Party Chest] @JournalEntry[Ongoing]","folder":null,"sort":0,"flags":{"combat-utility-belt":{"macroTrigger":""}},"ownership":{"default":0,"ZmU4M2IyMzQ1YzI3":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"name":"Heavy Crossbow","type":"script","author":"YjQyYTAxMDgxMmQ0","img":"icons/weapons/crossbows/crossbow-blue.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"EN387w0jjCXlduGT\" ItemID=\"rRwaPGMeVsLqKViC\"\nconst actorId = \"EN387w0jjCXlduGT\";\nconst itemId = \"rRwaPGMeVsLqKViC\";\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId);\nconst itemToRoll = actorToRoll?.items.get(itemId);\n\nif (game.modules.get('itemacro')?.active && itemToRoll?.hasMacro() && game.settings.get('itemacro', 'defaultmacro')) {\n\treturn itemToRoll.executeMacro();\n}\n\nif (!itemToRoll) {\n\treturn ui.notifications.warn(game.i18n.format(\"DND5E.ActionWarningNoItem\", { item: itemId, name: actorToRoll?.name ?? \"[Not Found]\" }));\n}\n\nreturn itemToRoll.roll({ vanilla: false });","folder":null,"sort":0,"flags":{"dnd5e":{"itemMacro":true}},"_id":"dSRy7kprYv3pmkBV","ownership":{"default":0,"YjQyYTAxMDgxMmQ0":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"type":"script","scope":"actor","name":"Song of Defense","img":"modules/plutonium/media/icon/mighty-force.svg","command":"dnd5e.documents.macro.rollItem(\"Song of Defense\")","flags":{"dnd5e":{"itemMacro":true}},"author":"Yjg4NjAyMmMyNzFk","folder":null,"sort":0,"ownership":{"default":0,"Yjg4NjAyMmMyNzFk":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.5","coreVersion":"10.291","createdTime":1684788455233,"modifiedTime":1684788455233,"lastModifiedBy":"Yjg4NjAyMmMyNzFk"},"_id":"eC6Zn7ouTEifUIj4"}
{"name":"Relentless Endurance","type":"script","author":"Yjg4NjAyMmMyNzFk","img":"icons/magic/control/control-influence-rally-purple.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"6JZ6aVbh5OAvWU0b\" ItemID=\"yUGZz3GvyMmYWEr2\"\nconst actorId = \"6JZ6aVbh5OAvWU0b\";\nconst itemId = \"yUGZz3GvyMmYWEr2\";\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId);\nconst itemToRoll = actorToRoll?.items.get(itemId);\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n\treturn itemToRoll.executeMacro();\n}\n\nif (!itemToRoll) {\n\treturn ui.notifications.warn(game.i18n.format(\"DND5E.ActionWarningNoItem\", { item: itemId, name: actorToRoll?.name ?? \"[Not Found]\" }));\n}\n\nreturn itemToRoll.roll({ vanilla: false });","folder":null,"sort":0,"flags":{"dnd5e":{"itemMacro":true}},"_id":"eIPsq9OnQiM2nyxi","ownership":{"default":0,"Yjg4NjAyMmMyNzFk":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"name":"M: Precision Attack","type":"script","author":"Yjg4NjAyMmMyNzFk","img":"worlds/dotmm/characters/346_-_Gardien_de_Cl_C3_B4ture/token.png","scope":"global","command":"const actorId = \"6JZ6aVbh5OAvWU0b\";\nconst itemId = \"ZGQ5MDMyMDZkOGVi\";\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId);\nconst itemToRoll = actorToRoll?.items.get(itemId);\nif (!itemToRoll) {\n\treturn ui.notifications.warn(game.i18n.format(\"DND5E.ActionWarningNoItem\", { item: itemId, name: actorToRoll?.name ?? \"[Not Found]\" }));\n}\n\nreturn itemToRoll.roll({ vanilla: false });","folder":null,"sort":0,"flags":{"dnd5e":{"itemMacro":true}},"_id":"eavHeSXs1sk4V0MF","ownership":{"default":0,"Yjg4NjAyMmMyNzFk":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"name":"New Macro","type":"chat","scope":"global","author":"Yjg4NjAyMmMyNzFk","img":"icons/svg/dice-target.svg","command":"","folder":null,"sort":0,"ownership":{"default":0,"Yjg4NjAyMmMyNzFk":3},"flags":{},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.5","coreVersion":"10.291","createdTime":1684782527807,"modifiedTime":1684782527807,"lastModifiedBy":"Yjg4NjAyMmMyNzFk"},"_id":"eeZAme2aRJVkc8P5"}
{"_id":"gMiy7roWPYRakVDB","name":"Lucky","type":"script","author":"Yjg4NjAyMmMyNzFk","img":"icons/sundries/gaming/dice-runed-brown.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"6JZ6aVbh5OAvWU0b\" ItemID=\"SAZfzJZB5r4FgIvB\"\nconst actorId = \"6JZ6aVbh5OAvWU0b\";\nconst itemId = \"SAZfzJZB5r4FgIvB\";\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId);\nconst itemToRoll = actorToRoll?.items.get(itemId);\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n\treturn itemToRoll.executeMacro();\n}\n\nif (!itemToRoll) {\n\treturn ui.notifications.warn(game.i18n.format(\"DND5E.ActionWarningNoItem\", { item: itemId, name: actorToRoll?.name ?? \"[Not Found]\" }));\n}\n\nreturn itemToRoll.roll({ vanilla: false });","folder":null,"sort":0,"flags":{"dnd5e":{"itemMacro":true}},"ownership":{"default":0,"Yjg4NjAyMmMyNzFk":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"gZ1FhZXQhBlRCB63","name":"Rune Deck!","type":"script","author":"NWRkZDAzNjU5Y2Vm","img":"icons/sundries/gaming/playing-cards-black.webp","scope":"global","command":"var ChatData = {\n    user: game.user.id,\n    speaker: ChatMessage.getSpeaker(canvas.scene.data.tokens.find(token => token.data.name = 'Halaster Blackcloak')),\n    content: \"You have triggered an Elder Rune! Roll any dice to seal your fate, on an even number the boon will be yours! But roll an odd number and the bane will effect you!\"\n}\nChatMessage.create(ChatData, {})\nconst table = game.tables.entities.find(t => t.name === \"DotMM - Rune Deck\")\ntable.draw()","folder":null,"sort":0,"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}},"ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"name":"Change Image Path","type":"script","scope":"global","author":"NWRkZDAzNjU5Y2Vm","img":"icons/svg/dice-target.svg","command":"// Get the current scene\nlet scene = game.scenes.viewed;\n\n// Loop through each token in the scene\nscene.data.tokens.forEach(tokenData => {\n  // Get the token's image path\n  let imagePath = tokenData.img;\n  // Check if the image path contains \"dotmm\"\n  if (imagePath.includes(\"dotmm\")) {\n    // Replace \"dotmm\" with \"dungeon-of-the-mad-mage\" in the image path\n    let newImagePath = imagePath.replace(\"dotmm\", \"dungeon-of-the-mad-mage\");\n    // Update the token's image path\n    tokenData.update({img: newImagePath});\n  }\n});","folder":null,"sort":0,"ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"flags":{"combat-utility-belt":{"macroTrigger":""}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.5","coreVersion":"10.291","createdTime":1680219613777,"modifiedTime":1680219638220,"lastModifiedBy":"NWRkZDAzNjU5Y2Vm"},"_id":"hPCIlmItTJ0vVqaN"}
{"name":"Token Details","type":"script","scope":"global","author":"NWRkZDAzNjU5Y2Vm","img":"icons/svg/dice-target.svg","command":"let selectedToken = canvas.tokens.controlled[0];\n\nif (selectedToken) {\n  let details = `\n    <h2>${selectedToken.name}</h2>\n    <p><strong>Token ID:</strong> ${selectedToken.id}</p>\n    <p><strong>Position:</strong> (${selectedToken.x}, ${selectedToken.y})</p>\n    <p><strong>Size:</strong> ${selectedToken.w}x${selectedToken.h}</p>\n    <p><strong>Token Image:</strong></p>\n    <img src=\"${selectedToken.data.img}\" width=\"100%\">\n    <p><strong>Token Data:</strong></p>\n    <pre>${JSON.stringify(selectedToken.data, null, 2)}</pre>\n  `;\n  new Dialog({\n    title: \"Token Details\",\n    content: details,\n    buttons: {\n      ok: {\n        label: \"OK\"\n      }\n    }\n  }).render(true);\n} else {\n  ui.notifications.warn(\"Please select a token.\");\n}","folder":null,"sort":0,"ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"flags":{"combat-utility-belt":{"macroTrigger":""}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.5","coreVersion":"10.291","createdTime":1680207160470,"modifiedTime":1680207184959,"lastModifiedBy":"NWRkZDAzNjU5Y2Vm"},"_id":"hTjbXghG6gUyeFco"}
{"type":"script","scope":"actor","name":"(Green Damage)","img":"icons/magic/fire/projectile-fireball-green.webp","command":"dnd5e.documents.macro.rollItem(\"(Green Damage)\")","flags":{"dnd5e":{"itemMacro":true}},"author":"Yjg4NjAyMmMyNzFk","folder":null,"sort":0,"ownership":{"default":0,"Yjg4NjAyMmMyNzFk":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.2.1","coreVersion":"10.291","createdTime":1686076131933,"modifiedTime":1686076131933,"lastModifiedBy":"Yjg4NjAyMmMyNzFk"},"_id":"iICFOSmtQS2kRcgk"}
{"_id":"ieKi2NbS6HlLxr3R","name":"New Macro","type":"script","author":"NWRkZDAzNjU5Y2Vm","img":"Dan/check-mark.png","scope":"global","command":"let iconPath = \"Dan/check-mark.png\"\n\nfor (let token of canvas.tokens.controlled) {\n token.toggleEffect(iconPath);\n}","folder":null,"sort":0,"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}},"ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"ij3eduxoJhopE2a4","name":"Trigger Mage Armour","type":"script","author":"F7z7HHZOzOuvUuCw","img":"icons/svg/dice-target.svg","scope":"global","command":"//type the name of the effect in \"EFFECT NAME\"\n\nlet dae_effect = async function() {\n\nconst effect_name = \"Mage Armour\";\n\nconst effect = token.actor.effects.entries;\n\nfor (let i = 0; i < effect.length; i++){\n\nlet condition = effect[i].data.label;\n\nlet status = effect[i].data.disabled;\n\nlet effect_id = effect[i].data._id;\n\nif ((condition === effect_name) && (status === false)) {\n\nawait token.actor.updateEmbeddedEntity(\"ActiveEffect\", {\"_id\": effect_id, \"disabled\" : true});\n\n}\n\nif ((condition === effect_name) && (status === true)){\n\nawait token.actor.updateEmbeddedEntity(\"ActiveEffect\", {\"_id\": effect_id, \"disabled\" : false});\n\n}\n\n}\n\n}\n\ndae_effect();","folder":null,"sort":0,"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.AHPt95szxy6zWwh6"}},"ownership":{"default":0,"F7z7HHZOzOuvUuCw":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"name":"Soul Blades: Homing Strikes","type":"script","author":"ZmU4M2IyMzQ1YzI3","img":"modules/plutonium/media/icon/mighty-force.svg","scope":"global","command":"// HotbarUses5e: ActorID=\"YLNA5CQsn8SWeuCL\" ItemID=\"WsNLZmanEuEa8Bmn\"\nconst actorId = \"YLNA5CQsn8SWeuCL\";\nconst itemId = \"WsNLZmanEuEa8Bmn\";\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId);\nconst itemToRoll = actorToRoll?.items.get(itemId);\n\nif (game.modules.get('itemacro')?.active && itemToRoll?.hasMacro() && game.settings.get('itemacro', 'defaultmacro')) {\n\treturn itemToRoll.executeMacro();\n}\n\nif (!itemToRoll) {\n\treturn ui.notifications.warn(game.i18n.format(\"DND5E.ActionWarningNoItem\", { item: itemId, name: actorToRoll?.name ?? \"[Not Found]\" }));\n}\n\nreturn itemToRoll.roll({ vanilla: false });","folder":null,"sort":0,"flags":{"dnd5e":{"itemMacro":true}},"_id":"isnG1SEF98F5wdFp","ownership":{"default":0,"ZmU4M2IyMzQ1YzI3":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"name":"fix tokens","type":"script","scope":"global","author":"F7z7HHZOzOuvUuCw","img":"icons/svg/dice-target.svg","command":"for (const id of game.actors.invalidDocumentIds) {\n    const actor = game.actors.getInvalid(id);\n\n    ui.notifications.info(`Fixing ${actor.name} (${actor.uuid})`);\n\n    await actor.update(actor.toObject(), { diff: false })\n}\n\nfor (const scene of game.scenes) {\n    for (const token of scene.tokens) {\n        if (!token.id) {\n            continue;\n        }\n\n        const actorId = token.actorId;\n        const baseActor = game.actors.get(actorId)\n            ?? (game.actors.invalidDocumentIds.has(actorId)\n                ? game.actors.getInvalid(actorId) : null);\n\n        if (!baseActor) {\n            continue;\n        }\n\n        const overrides = getDocumentClass(\"Actor\").schema.clean(token.actorData, { partial: true });\n        const actorData = foundry.utils.mergeObject(baseActor.toObject(), overrides);\n        const actor = getDocumentClass(\"Actor\").fromSource(foundry.utils.deepClone(actorData), { parent: token });\n        const fixedActorData = foundry.utils.filterObject(actor.toObject(), token.actorData);\n        const diffActorData = foundry.utils.diffObject(token.actorData, fixedActorData);\n\n        if (foundry.utils.isEmpty(diffActorData)) {\n            continue;\n        }\n\n        ui.notifications.info(`Fixing ${token.name} (${token.uuid})`);\n\n        if (token.actorLink) {\n            await token.update({ actorData: diffActorData }, { diff: false });\n        } else {\n            await token.update({ actorLink: true }, { diff: false });\n            await token.update({ actorLink: false, actorData: diffActorData }, { diff: false });\n        }\n    }\n}\n\nfoundry.utils.debouncedReload();","folder":null,"sort":0,"ownership":{"default":0,"F7z7HHZOzOuvUuCw":3},"flags":{"combat-utility-belt":{"macroTrigger":""}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.2","coreVersion":"10.285","createdTime":1673979974984,"modifiedTime":1673979997232,"lastModifiedBy":"F7z7HHZOzOuvUuCw"},"_id":"j0nksuHDytW1ZO1X"}
{"name":"Rapier of Warning","type":"script","author":"ZmU4M2IyMzQ1YzI3","img":"icons/weapons/swords/sword-guard-brown.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"YLNA5CQsn8SWeuCL\" ItemID=\"ERGKVk89v3fk5FHj\"\nconst actorId = \"YLNA5CQsn8SWeuCL\";\nconst itemId = \"ERGKVk89v3fk5FHj\";\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId);\nconst itemToRoll = actorToRoll?.items.get(itemId);\n\nif (game.modules.get('itemacro')?.active && itemToRoll?.hasMacro() && game.settings.get('itemacro', 'defaultmacro')) {\n\treturn itemToRoll.executeMacro();\n}\n\nif (!itemToRoll) {\n\treturn ui.notifications.warn(game.i18n.format(\"DND5E.ActionWarningNoItem\", { item: itemId, name: actorToRoll?.name ?? \"[Not Found]\" }));\n}\n\nreturn itemToRoll.roll({ vanilla: false });","folder":null,"sort":0,"flags":{"dnd5e":{"itemMacro":true}},"_id":"jIxNQdAjTKmRM17T","ownership":{"default":0,"ZmU4M2IyMzQ1YzI3":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"name":"New Macro","type":"chat","author":"Yjg4NjAyMmMyNzFk","img":"icons/svg/dice-target.svg","scope":"global","command":"","folder":null,"sort":0,"flags":{},"_id":"jh8nS6SvbeffII8v","ownership":{"default":0,"Yjg4NjAyMmMyNzFk":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"name":"Relentless Endurance","type":"script","author":"Yjg4NjAyMmMyNzFk","img":"icons/magic/control/control-influence-rally-purple.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"6JZ6aVbh5OAvWU0b\" ItemID=\"yUGZz3GvyMmYWEr2\"\nconst actorId = \"6JZ6aVbh5OAvWU0b\";\nconst itemId = \"yUGZz3GvyMmYWEr2\";\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId);\nconst itemToRoll = actorToRoll?.items.get(itemId);\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n\treturn itemToRoll.executeMacro();\n}\n\nif (!itemToRoll) {\n\treturn ui.notifications.warn(game.i18n.format(\"DND5E.ActionWarningNoItem\", { item: itemId, name: actorToRoll?.name ?? \"[Not Found]\" }));\n}\n\nreturn itemToRoll.roll({ vanilla: false });","folder":null,"sort":0,"flags":{"dnd5e":{"itemMacro":true}},"_id":"lIwGkVyHfKJkcKl6","ownership":{"default":0,"Yjg4NjAyMmMyNzFk":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"name":"Nekcoyle GWM","type":"script","author":"Yjg4NjAyMmMyNzFk","img":"icons/weapons/swords/greatsword-crossguard-blue.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"6JZ6aVbh5OAvWU0b\" ItemID=\"N2RhZWZkYWQzMDQ2\"\nconst actorId = \"6JZ6aVbh5OAvWU0b\";\nconst itemId = \"N2RhZWZkYWQzMDQ2\";\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId);\nconst itemToRoll = actorToRoll?.items.get(itemId);\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n\treturn itemToRoll.executeMacro();\n}\n\nif (!itemToRoll) {\n\treturn ui.notifications.warn(game.i18n.format(\"DND5E.ActionWarningNoItem\", { item: itemId, name: actorToRoll?.name ?? \"[Not Found]\" }));\n}\n\nreturn itemToRoll.roll({ vanilla: false });","folder":null,"sort":0,"flags":{"dnd5e":{"itemMacro":true}},"_id":"m5mkBS0o62chmkJo","ownership":{"default":0,"Yjg4NjAyMmMyNzFk":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"name":"Nekoyle","type":"script","author":"Yjg4NjAyMmMyNzFk","img":"icons/weapons/swords/greatsword-crossguard-silver.webp","scope":"global","command":"const actorId = \"6JZ6aVbh5OAvWU0b\";\nconst itemId = \"Hmeg7vibl82T8UEX\";\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId);\nconst itemToRoll = actorToRoll?.items.get(itemId);\nif (!itemToRoll) {\n\treturn ui.notifications.warn(game.i18n.format(\"DND5E.ActionWarningNoItem\", { item: itemId, name: actorToRoll?.name ?? \"[Not Found]\" }));\n}\n\nreturn itemToRoll.roll({ vanilla: false });","folder":null,"sort":0,"flags":{"dnd5e":{"itemMacro":true}},"_id":"namXNZTHRnkvgaTT","ownership":{"default":0,"Yjg4NjAyMmMyNzFk":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"name":"Soul Blade - Homing Strikes","type":"script","author":"ZmU4M2IyMzQ1YzI3","img":"modules/plutonium/media/icon/feat/xge-elven-accuracy.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"YLNA5CQsn8SWeuCL\" ItemID=\"WsNLZmanEuEa8Bmn\"\nconst actorId = \"YLNA5CQsn8SWeuCL\";\nconst itemId = \"WsNLZmanEuEa8Bmn\";\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId);\nconst itemToRoll = actorToRoll?.items.get(itemId);\n\nif (game.modules.get('itemacro')?.active && itemToRoll?.hasMacro() && game.settings.get('itemacro', 'defaultmacro')) {\n\treturn itemToRoll.executeMacro();\n}\n\nif (!itemToRoll) {\n\treturn ui.notifications.warn(game.i18n.format(\"DND5E.ActionWarningNoItem\", { item: itemId, name: actorToRoll?.name ?? \"[Not Found]\" }));\n}\n\nreturn itemToRoll.roll({ vanilla: false });","folder":null,"sort":0,"flags":{"dnd5e":{"itemMacro":true}},"_id":"nvJL1unoctVoCO2M","ownership":{"default":0,"ZmU4M2IyMzQ1YzI3":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"name":"Sentinel Shield","type":"script","author":"Yjg4NjAyMmMyNzFk","img":"assets/images/Sential%20Shield.jpeg","scope":"global","command":"// HotbarUses5e: ActorID=\"6JZ6aVbh5OAvWU0b\" ItemID=\"V9ZWkBYSuGc44nFl\"\nconst actorId = \"6JZ6aVbh5OAvWU0b\";\nconst itemId = \"V9ZWkBYSuGc44nFl\";\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId);\nconst itemToRoll = actorToRoll?.items.get(itemId);\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n\treturn itemToRoll.executeMacro();\n}\n\nif (!itemToRoll) {\n\treturn ui.notifications.warn(game.i18n.format(\"DND5E.ActionWarningNoItem\", { item: itemId, name: actorToRoll?.name ?? \"[Not Found]\" }));\n}\n\nreturn itemToRoll.roll({ vanilla: false });","folder":null,"sort":0,"flags":{"dnd5e":{"itemMacro":true}},"_id":"o52Pzjrx4DxnzlrJ","ownership":{"default":0,"Yjg4NjAyMmMyNzFk":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"oUW8AphOJvB7zfeU","name":"Summon","type":"script","author":"YWIzYTg2YmYzYjVj","img":"icons/svg/dice-target.svg","scope":"global","command":"let FaustX = canvas.tokens.placeables.find(token => token.name == \"Faustus\");\n\nfor (let nextToken of canvas.tokens.placeables)\n    {\n    if (nextToken.name == \"Faustus - Skelly\") \n        {\n         nextToken.document.update({x: FaustX.data.x, y: FaustX.data.y + 50});\n        }\n    }\n\n\nfor (let nextToken of canvas.tokens.placeables)\n    {\n    if (nextToken.name == \"Faustus - Zomboid\") \n        {\n         nextToken.document.update({x: FaustX.data.x, y: FaustX.data.y - 50});\n        }\n    }","folder":null,"sort":0,"flags":{"combat-utility-belt":{"macroTrigger":""}},"ownership":{"default":0,"YWIzYTg2YmYzYjVj":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"name":"Unarmed Strike - Sneak Attack","type":"script","author":"ZmU4M2IyMzQ1YzI3","img":"icons/magic/control/buff-strength-muscle-damage-orange.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"YLNA5CQsn8SWeuCL\" ItemID=\"kHaU7ZtoZc51DAxz\"\nconst actorId = \"YLNA5CQsn8SWeuCL\";\nconst itemId = \"kHaU7ZtoZc51DAxz\";\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId);\nconst itemToRoll = actorToRoll?.items.get(itemId);\n\nif (game.modules.get('itemacro')?.active && itemToRoll?.hasMacro() && game.settings.get('itemacro', 'defaultmacro')) {\n\treturn itemToRoll.executeMacro();\n}\n\nif (!itemToRoll) {\n\treturn ui.notifications.warn(game.i18n.format(\"DND5E.ActionWarningNoItem\", { item: itemId, name: actorToRoll?.name ?? \"[Not Found]\" }));\n}\n\nreturn itemToRoll.roll({ vanilla: false });","folder":null,"sort":0,"flags":{"dnd5e":{"itemMacro":true}},"_id":"otlrvSyFExkKQr24","ownership":{"default":0,"ZmU4M2IyMzQ1YzI3":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"pGexMfcPuiIrBNjG","name":"Second Wind","type":"script","author":"Yjg4NjAyMmMyNzFk","img":"icons/magic/life/heart-glowing-red.webp","scope":"global","command":"const actorId = \"6JZ6aVbh5OAvWU0b\";\nconst itemId = \"URcR1QFUEYINZSs1\";\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId);\nconst itemToRoll = actorToRoll?.items.get(itemId);\nif (!itemToRoll) {\n\treturn ui.notifications.warn(game.i18n.format(\"DND5E.ActionWarningNoItem\", { item: itemId, name: actorToRoll?.name ?? \"[Not Found]\" }));\n}\n\nreturn itemToRoll.roll({ vanilla: false });","folder":null,"sort":0,"flags":{"dnd5e":{"itemMacro":true}},"ownership":{"default":0,"Yjg4NjAyMmMyNzFk":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"name":"Bite - Werebat Form","type":"script","author":"ZmU4M2IyMzQ1YzI3","img":"icons/svg/item-bag.svg","scope":"global","command":"// HotbarUses5e: ActorID=\"DEbBAHXwqBb3yQ0L\" ItemID=\"xetH3ngR8Dsa9rDQ\"\nconst actorId = \"DEbBAHXwqBb3yQ0L\";\nconst itemId = \"xetH3ngR8Dsa9rDQ\";\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId);\nconst itemToRoll = actorToRoll?.items.get(itemId);\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n\treturn itemToRoll.executeMacro();\n}\n\nif (!itemToRoll) {\n\treturn ui.notifications.warn(game.i18n.format(\"DND5E.ActionWarningNoItem\", { item: itemId, name: actorToRoll?.name ?? \"[Not Found]\" }));\n}\n\nreturn itemToRoll.roll({ vanilla: false });","folder":null,"sort":0,"flags":{"dnd5e":{"itemMacro":true}},"_id":"q9sdPha9Dm2Q0V9l","ownership":{"default":0,"ZmU4M2IyMzQ1YzI3":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"name":"Select All Tokens by Name","type":"script","scope":"global","author":"NWRkZDAzNjU5Y2Vm","img":"icons/svg/dice-target.svg","command":"let selectedId = canvas.tokens.controlled[0].document.actor.id \n  \n canvas.tokens.ownedTokens.forEach(i => { \n   if(i.data.actorId == selectedId) { \n     i.control({releaseOthers: false}) \n   } \n })","folder":null,"sort":0,"ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"flags":{"combat-utility-belt":{"macroTrigger":""}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.5","coreVersion":"10.291","createdTime":1680283485479,"modifiedTime":1680286560547,"lastModifiedBy":"NWRkZDAzNjU5Y2Vm"},"_id":"qOr7zciQzGrFuMnu"}
{"name":"M: Commander's Strike","type":"script","author":"Yjg4NjAyMmMyNzFk","img":"worlds/dotmm/characters/346_-_Gardien_de_Cl_C3_B4ture/token.png","scope":"global","command":"const actorId = \"6JZ6aVbh5OAvWU0b\";\nconst itemId = \"ZTk1ZmQ1YjY1ZTA0\";\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId);\nconst itemToRoll = actorToRoll?.items.get(itemId);\nif (!itemToRoll) {\n\treturn ui.notifications.warn(game.i18n.format(\"DND5E.ActionWarningNoItem\", { item: itemId, name: actorToRoll?.name ?? \"[Not Found]\" }));\n}\n\nreturn itemToRoll.roll({ vanilla: false });","folder":null,"sort":0,"flags":{"dnd5e":{"itemMacro":true}},"_id":"qdXpNy1Vh3cS4I1R","ownership":{"default":0,"Yjg4NjAyMmMyNzFk":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"name":"Camera > Unlinked","type":"script","scope":"global","author":"NWRkZDAzNjU5Y2Vm","img":"icons/svg/dice-target.svg","command":"let myTokens = canvas.tokens.placeables.filter(myToken => !myToken.actor);\n\nif (myTokens.length === 0) {\n  ui.notifications.warn(\"No unlinked tokens found on the canvas.\");\n  return;\n}\n\nlet myToken = myTokens[0];\n\ncanvas.animatePan({\n  x: myToken.center.x,\n  y: myToken.center.y,\n  duration: 1000\n});","folder":null,"sort":0,"ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"flags":{"combat-utility-belt":{"macroTrigger":""}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.5","coreVersion":"10.291","createdTime":1680440674697,"modifiedTime":1680440684579,"lastModifiedBy":"NWRkZDAzNjU5Y2Vm"},"_id":"rDFFoJLJgd5jb6im"}
{"_id":"rin0o66oarsyIXOS","name":"t","type":"script","author":"NWRkZDAzNjU5Y2Vm","img":"icons/svg/dice-target.svg","scope":"global","command":"for (const token of canvas.tokens.controlled){\n    if (token.data.dimSight != 0){\n        await token.update({dimSight: 0,brightSight:0})\n    } else {\n        await token.update({dimSight: 40,brightSight:20})\n}\n}","folder":null,"sort":0,"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}},"ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"tGKclKd1rY64Yqv2","name":"Relentless Endurance","type":"script","author":"Yjg4NjAyMmMyNzFk","img":"icons/magic/control/control-influence-rally-purple.webp","scope":"global","command":"const actorId = \"6JZ6aVbh5OAvWU0b\";\nconst itemId = \"yUGZz3GvyMmYWEr2\";\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId);\nconst itemToRoll = actorToRoll?.items.get(itemId);\nif (!itemToRoll) {\n\treturn ui.notifications.warn(game.i18n.format(\"DND5E.ActionWarningNoItem\", { item: itemId, name: actorToRoll?.name ?? \"[Not Found]\" }));\n}\n\nreturn itemToRoll.roll({ vanilla: false });","folder":null,"sort":0,"flags":{"dnd5e":{"itemMacro":true}},"ownership":{"default":0,"Yjg4NjAyMmMyNzFk":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"name":"Psionic Power: Psychic Whispers","type":"script","author":"ZmU4M2IyMzQ1YzI3","img":"modules/plutonium/media/icon/mighty-force.svg","scope":"global","command":"// HotbarUses5e: ActorID=\"YLNA5CQsn8SWeuCL\" ItemID=\"XjC7H9y26NqbmeFi\"\nconst actorId = \"YLNA5CQsn8SWeuCL\";\nconst itemId = \"XjC7H9y26NqbmeFi\";\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId);\nconst itemToRoll = actorToRoll?.items.get(itemId);\n\nif (game.modules.get('itemacro')?.active && itemToRoll?.hasMacro() && game.settings.get('itemacro', 'defaultmacro')) {\n\treturn itemToRoll.executeMacro();\n}\n\nif (!itemToRoll) {\n\treturn ui.notifications.warn(game.i18n.format(\"DND5E.ActionWarningNoItem\", { item: itemId, name: actorToRoll?.name ?? \"[Not Found]\" }));\n}\n\nreturn itemToRoll.roll({ vanilla: false });","folder":null,"sort":0,"flags":{"dnd5e":{"itemMacro":true}},"_id":"u7hY2zkNPx5oDD8a","ownership":{"default":0,"ZmU4M2IyMzQ1YzI3":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"name":"Sentinel Shield","type":"script","author":"Yjg4NjAyMmMyNzFk","img":"assets/images/Sential%20Shield.jpeg","scope":"global","command":"// HotbarUses5e: ActorID=\"6JZ6aVbh5OAvWU0b\" ItemID=\"V9ZWkBYSuGc44nFl\"\nconst actorId = \"6JZ6aVbh5OAvWU0b\";\nconst itemId = \"V9ZWkBYSuGc44nFl\";\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId);\nconst itemToRoll = actorToRoll?.items.get(itemId);\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n\treturn itemToRoll.executeMacro();\n}\n\nif (!itemToRoll) {\n\treturn ui.notifications.warn(game.i18n.format(\"DND5E.ActionWarningNoItem\", { item: itemId, name: actorToRoll?.name ?? \"[Not Found]\" }));\n}\n\nreturn itemToRoll.roll({ vanilla: false });","folder":null,"sort":0,"flags":{"dnd5e":{"itemMacro":true}},"_id":"uUdPw5CFNYTv5NnW","ownership":{"default":0,"Yjg4NjAyMmMyNzFk":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"name":"Link Tokens","type":"script","scope":"global","author":"NWRkZDAzNjU5Y2Vm","img":"icons/svg/dice-target.svg","command":"let selected = canvas.tokens.controlled;\nif (selected.length > 0) {\n  new Dialog({\n    title: \"Link Tokens to Actor\",\n    content: `\n      <form>\n        <div class=\"form-group\">\n          <label>Name of the Actor:</label>\n          <input type=\"text\" name=\"actorName\" autofocus>\n        </div>\n      </form>\n    `,\n    buttons: {\n      yes: {\n        icon: \"<i class='fas fa-check'></i>\",\n        label: \"Link\",\n        callback: (html) => {\n          let actorName = html.find('[name=\"actorName\"]').val();\n          if (!actorName) return;\n          let actor = game.actors.getName(actorName.trim());\n          if (!actor) return ui.notifications.warn(`No actor found with name ${actorName}.`);\n          selected.forEach(token => {\n            token.document.update({actorId: actor.id});\n          });\n        }\n      },\n      no: {\n        icon: \"<i class='fas fa-times'></i>\",\n        label: \"Cancel\"\n      }\n    }\n  }).render(true);\n} else {\n  ui.notifications.warn(\"Please select at least one token to link to an actor.\");\n}","folder":null,"sort":0,"ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"flags":{"combat-utility-belt":{"macroTrigger":""}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.5","coreVersion":"10.291","createdTime":1680213399193,"modifiedTime":1680216140872,"lastModifiedBy":"NWRkZDAzNjU5Y2Vm"},"_id":"v4qhUKcfVNn7Buxy"}
{"_id":"vZm8H0R4fOMMPIlC","name":"Reset Halaster Points","type":"script","author":"NWRkZDAzNjU5Y2Vm","img":"icons/svg/cancel.svg","scope":"global","command":"game.actors.get('pgiLhfM084FTDXir').data.data.currency.cp= 0\ngame.actors.get('D0qm7efwho4RTQw6').data.data.currency.cp= 0\ngame.actors.get('6JZ6aVbh5OAvWU0b').data.data.currency.cp= 0\ngame.actors.get('EN387w0jjCXlduGT').data.data.currency.cp= 0\ngame.actors.get('YLNA5CQsn8SWeuCL').data.data.currency.cp= 0","folder":null,"sort":0,"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}},"ownership":{"default":0,"NWRkZDAzNjU5Y2Vm":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"name":"Sentinel","type":"script","author":"ZmU4M2IyMzQ1YzI3","img":"modules/plutonium/media/icon/feat/phb-sentinel.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"YLNA5CQsn8SWeuCL\" ItemID=\"c6fypTzoaJnHmAEQ\"\nconst actorId = \"YLNA5CQsn8SWeuCL\";\nconst itemId = \"c6fypTzoaJnHmAEQ\";\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId);\nconst itemToRoll = actorToRoll?.items.get(itemId);\n\nif (game.modules.get('itemacro')?.active && itemToRoll?.hasMacro() && game.settings.get('itemacro', 'defaultmacro')) {\n\treturn itemToRoll.executeMacro();\n}\n\nif (!itemToRoll) {\n\treturn ui.notifications.warn(game.i18n.format(\"DND5E.ActionWarningNoItem\", { item: itemId, name: actorToRoll?.name ?? \"[Not Found]\" }));\n}\n\nreturn itemToRoll.roll({ vanilla: false });","folder":null,"sort":0,"flags":{"dnd5e":{"itemMacro":true}},"_id":"vhg0l8QyddAEyF8J","ownership":{"default":0,"ZmU4M2IyMzQ1YzI3":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"name":"New Macro","type":"chat","author":"YjQyYTAxMDgxMmQ0","img":"icons/svg/dice-target.svg","scope":"global","command":"","folder":null,"sort":0,"flags":{},"_id":"wDKEqDQhxOHxSPe5","ownership":{"default":0,"YjQyYTAxMDgxMmQ0":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"name":"M: Precision Attack","type":"script","author":"Yjg4NjAyMmMyNzFk","img":"worlds/dotmm/characters/346_-_Gardien_de_Cl_C3_B4ture/token.png","scope":"global","command":"// HotbarUses5e: ActorID=\"6JZ6aVbh5OAvWU0b\" ItemID=\"ZGQ5MDMyMDZkOGVi\"\nconst actorId = \"6JZ6aVbh5OAvWU0b\";\nconst itemId = \"ZGQ5MDMyMDZkOGVi\";\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId);\nconst itemToRoll = actorToRoll?.items.get(itemId);\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n\treturn itemToRoll.executeMacro();\n}\n\nif (!itemToRoll) {\n\treturn ui.notifications.warn(game.i18n.format(\"DND5E.ActionWarningNoItem\", { item: itemId, name: actorToRoll?.name ?? \"[Not Found]\" }));\n}\n\nreturn itemToRoll.roll({ vanilla: false });","folder":null,"sort":0,"flags":{"dnd5e":{"itemMacro":true}},"_id":"wZBchPgN0hVmEeju","ownership":{"default":0,"Yjg4NjAyMmMyNzFk":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"name":"Sentinel Shield","type":"script","author":"Yjg4NjAyMmMyNzFk","img":"assets/images/Sential%20Shield.jpeg","scope":"global","command":"// HotbarUses5e: ActorID=\"6JZ6aVbh5OAvWU0b\" ItemID=\"V9ZWkBYSuGc44nFl\"\nconst actorId = \"6JZ6aVbh5OAvWU0b\";\nconst itemId = \"V9ZWkBYSuGc44nFl\";\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId);\nconst itemToRoll = actorToRoll?.items.get(itemId);\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n\treturn itemToRoll.executeMacro();\n}\n\nif (!itemToRoll) {\n\treturn ui.notifications.warn(game.i18n.format(\"DND5E.ActionWarningNoItem\", { item: itemId, name: actorToRoll?.name ?? \"[Not Found]\" }));\n}\n\nreturn itemToRoll.roll({ vanilla: false });","folder":null,"sort":0,"flags":{"dnd5e":{"itemMacro":true}},"_id":"xrzKEcVIArdwq4T5","ownership":{"default":0,"Yjg4NjAyMmMyNzFk":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"name":"Psychic Blade - Off Hand","type":"script","author":"ZmU4M2IyMzQ1YzI3","img":"modules/plutonium/media/icon/mighty-force.svg","scope":"global","command":"// HotbarUses5e: ActorID=\"YLNA5CQsn8SWeuCL\" ItemID=\"oSHe4zNxIOEUqp8y\"\nconst actorId = \"YLNA5CQsn8SWeuCL\";\nconst itemId = \"oSHe4zNxIOEUqp8y\";\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId);\nconst itemToRoll = actorToRoll?.items.get(itemId);\n\nif (game.modules.get('itemacro')?.active && itemToRoll?.hasMacro() && game.settings.get('itemacro', 'defaultmacro')) {\n\treturn itemToRoll.executeMacro();\n}\n\nif (!itemToRoll) {\n\treturn ui.notifications.warn(game.i18n.format(\"DND5E.ActionWarningNoItem\", { item: itemId, name: actorToRoll?.name ?? \"[Not Found]\" }));\n}\n\nreturn itemToRoll.roll({ vanilla: false });","folder":null,"sort":0,"flags":{"dnd5e":{"itemMacro":true}},"_id":"yV4mewFBXcu37AQb","ownership":{"default":0,"ZmU4M2IyMzQ1YzI3":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
